import ( "QuickTravel.msg" );

// Open menu
void QuickTravelDisplay()
{
	switch (GET_FIELD_MAJOR())
	{
		case 6:
			SchoolTravel();
			return;
		case 7:
			DormTravel();
			return;
		case 8:
			MallTravel();
			return;
		case 9:
			IwatodaiTravel();
			return;
		case 10:
			PortIslandTravel();
			return;
		default:
			return;
	}
}

void SchoolTravel()
{
	OPEN_MSG_WIN();
	MSG( Choose );
	//Close menu on Circle
	SEL_CHK_PAD(6,20);
	//Open map on Select
	SEL_CHK_PAD(8,5);
	//Next Page on D-Pad Right
	SEL_CHK_PAD(13,3);
	//Previous Page on D-Pad Left
	SEL_CHK_PAD(15,4);
	int select = SEL( School );
	CLOSE_MSG_WIN();
	if (select < 3)
	{
		FADE( 3, 0 );
		FADE_SYNC();
		BIT_ON( 0 + 0x0400 + 0x0800 + 0x0400 + 0x0400 + 7 );
	}
	switch (select)
	{
		case 0: // School Entranceway
			SchoolEntrance();
			break;
		case 1: // 1st Floor, Main Lobby
			SchoolLobby();
			break;
		case 2: // 1st Floor, Left Hall
			SchoolLeftHall();
			break;
		case 3: // Next Page (D-Pad Right)
			SchoolTravel2();
			break;
		case 4: //Previous Page (D-Pad Left)
			SchoolTravel3();
			break;
		case 5: // Town Map (Select)
			SchoolMap();
			break;
		case 20:
			return;
	}
}

void SchoolTravel2()
{
	OPEN_MSG_WIN();
	MSG( Choose );
	//Close menu on Circle
	SEL_CHK_PAD(6,20);
	//Open map on Select
	SEL_CHK_PAD(8,5);
	//Next Page on D-Pad Right
	SEL_CHK_PAD(13,3);
	//Previous Page on D-Pad Left
	SEL_CHK_PAD(15,4);
	int select = SEL( School2 );
	CLOSE_MSG_WIN();
	if (select < 3)
	{
		FADE( 3, 0 );
		FADE_SYNC();
		BIT_ON( 0 + 0x0400 + 0x0800 + 0x0400 + 0x0400 + 7 );
	}
	switch (select)
	{
		case 0 : // 1st Floor, Right Hall
			SchoolRightHall();
			break;
		case 1 : // Sports Hall
			SchoolSportsHall();
			break;
		case 2: // Classrom 2-F
			SchoolHomeroom();
			break;
		case 3: // Next Page (D-Pad Right)
			SchoolTravel3();
			break;
		case 4: //Previous Page (D-Pad Left)
			SchoolTravel();
			break;
		case 5: // Town Map (Select)
			SchoolMap();
			break;
		case 20:
			return;
	}
}

void SchoolTravel3()
{
	OPEN_MSG_WIN();
	MSG( Choose );
	//Close menu on Circle
	SEL_CHK_PAD(6,20);
	//Open map on Select
	SEL_CHK_PAD(8,5);
	//Next Page on D-Pad Right
	SEL_CHK_PAD(13,3);
	//Previous Page on D-Pad Left
	SEL_CHK_PAD(15,4);
	int select = SEL( School3 );
	CLOSE_MSG_WIN();
	if (select < 2)
	{
		FADE( 3, 0 );
		FADE_SYNC();
		BIT_ON( 0 + 0x0400 + 0x0800 + 0x0400 + 0x0400 + 7 );
	}
	switch (select)
	{
		case 0: // 2nd Floor, Hallway
			SchoolSecondHall();
			break;
		case 1: // Rooftop
			SchoolRooftop();
			break;
		case 2: // Town Map
			SchoolMap();
			break;
		case 3: // Next Page (D-Pad Right)
			SchoolTravel();
			break;
		case 4: //Previous Page (D-Pad Left)
			SchoolTravel2();
			break;
		case 5: // Town Map (Select)
			SchoolMap();
			break;
		case 20:
			return;
	}
}

void DormTravel()
{
	if (GET_FIELD_MINOR() == 9)
	{
		OPEN_MSG_WIN();
		MSG( Choose );
		//Close menu on Circle
		SEL_CHK_PAD(6,20);
		//Open map on Select
		SEL_CHK_PAD(8,5);
		int select = SEL( DormOutside );
		CLOSE_MSG_WIN();
		switch (select)
		{
			case 0: // 1st Floor, Lounge
				DormLobby();
				return;
			case 1: // Town Map
				DormMap();
				return;
			case 5: // Town Map (Select)
				DormMap();
				break;
			case 20:
				return;
		}
	
	}
	else if (GET_FIELD_MINOR() == 1)
	{
		if ( FUNCTION_0083() == 7 )
		{
			OPEN_MSG_WIN();
			MSG( OUTDOOR_MYROOM );
		}
		else
		{
		OPEN_MSG_WIN();
		MSG( Choose );
		//Close menu on Circle
		SEL_CHK_PAD(6,20);
		//Open map on Select
		SEL_CHK_PAD(8,5);
		//Next Page on D-Pad Right
		SEL_CHK_PAD(13,3);
		//Previous Page on D-Pad Left
		SEL_CHK_PAD(15,4);
		int select = SEL( Dorm );
		CLOSE_MSG_WIN();
		switch (select)
		{
			case 0: // Your Room
				MyRoom();
				break;
			case 1: // Dorm Entrance
				DormEntrance();
				break;
			case 2: // 1st Floor, Lounge
				DormLobby();
				break;
			case 3: // Next Page (D-Pad Right)
				DormTravel2();
				break;
			case 4: // Previous Page (D-Pad Left)
				DormTravel3();
				break;
			case 5: // Town Map (Select)
				DormMap();
				break;
			case 20:
				return;
		}
		}
	}
	else
	{
		OPEN_MSG_WIN();
		MSG( Choose );
		//Close menu on Circle
		SEL_CHK_PAD(6,20);
		//Open map on Select
		SEL_CHK_PAD(8,5);
		//Next Page on D-Pad Right
		SEL_CHK_PAD(13,3);
		//Previous Page on D-Pad Left
		SEL_CHK_PAD(15,4);
		int select = SEL( Dorm );
		CLOSE_MSG_WIN();
		switch (select)
		{
			case 0: // Your Room
				MyRoom();
				break;
			case 1: // Dorm Entrance
				DormEntrance();
				break;
			case 2: // 1st Floor, Lounge
				DormLobby();
				break;
			case 3: // Next Page (D-Pad Right)
				DormTravel2();
				break;
			case 4: // Previous Page (D-Pad Left)
				DormTravel3();
				break;
			case 5: // Town Map (Select)
				DormMap();
				break;
			case 20:
				return;
		}
	}
}

void DormTravel2()
{
	OPEN_MSG_WIN();
	MSG( Choose );
	//Close menu on Circle
	SEL_CHK_PAD(6,20);
	//Open map on Select
	SEL_CHK_PAD(8,5);
	//Next Page on D-Pad Right
	SEL_CHK_PAD(13,3);
	//Previous Page on D-Pad Left
	SEL_CHK_PAD(15,4);
	int select = SEL( Dorm2 );
	CLOSE_MSG_WIN();
	switch (select)
	{
		case 0: // 2nd Floor, Hallway
			DormFloorTwo();
			break;
		case 1: // 3rd Floor, Hallway
			DormFloorThree();
			break;
		case 2: // 4th Floor, Hallway
			DormFloorFour();
			break;
		case 3: // Next Page (D-Pad Right)
			DormTravel3();
			break;
		case 4: // Previous Page (D-Pad Left)
			DormTravel();
			break;
		case 5: // Town Map (Select)
			DormMap();
			break;
		case 20:
			return;
	}
}

void DormTravel3()
{
	OPEN_MSG_WIN();
	MSG( Choose );
	//Close menu on Circle
	SEL_CHK_PAD(6,20);
	//Open map on Select
	SEL_CHK_PAD(8,5);
	//Next Page on D-Pad Right
	SEL_CHK_PAD(13,3);
	//Previous Page on D-Pad Left
	SEL_CHK_PAD(15,4);
	int select = SEL( Dorm3 );
	CLOSE_MSG_WIN();
	switch (select)
	{
		case 0: // 5th Floor, Hallway
			DormFloorFive();
			break;
		case 1: // Meeting Room
			MeetingRoom();
			break;
		case 2: // Town Map
			DormMap();
			break;
		case 3: // Next Page (D-Pad Right)
			DormTravel();
			break;
		case 4: // Previous Page (D-Pad Left)
			DormTravel2();
			break;
		case 5: // Town Map (Select)
			DormMap();
		case 20:
			return;
	}
}

void MallTravel()
{
	OPEN_MSG_WIN();
	MSG( Choose );
	//Close menu on Circle
	SEL_CHK_PAD(6,20);
	//Open map on Select
	SEL_CHK_PAD(8,5);
	//Open shops on Start
	SEL_CHK_PAD(11,6);
	int select = SEL( Mall );
	CLOSE_MSG_WIN();
	if (select < 2)
	{
		FADE( 3, 0 );
		FADE_SYNC();
		BIT_ON( 0 + 0x0400 + 0x0800 + 0x0400 + 0x0400 + 7 );
	}
	switch (select)
	{
		case 0: // Paulownia Mall
			CALL_FIELD( 8, 1, 1, 0 );
			break;
		case 1: // Back Alley
			MallAlley();
			break;	
		case 2: // Facilities
			MallFacilities();
			break;
		case 3: // Town Map
			MallMap();
			break;
		case 5: //Town Map (Select)
			MallMap();
			break;
		case 6: //Shops (Start)
			MallFacilities();
			break;
		case 20:
			return;
	}
}

void MallFacilities()
{
	OPEN_MSG_WIN();
	MSG( Choose );
	//Close menu on Circle
	SEL_CHK_PAD(6,20);
	//Open map on Select
	SEL_CHK_PAD(8,5);
	//Next Page on D-Pad Right
	SEL_CHK_PAD(13,3);
	//Previous Page on D-Pad Left
	SEL_CHK_PAD(15,4);
	int select = SEL( MallFacilities );
	CLOSE_MSG_WIN();
	switch (select)
	{
		case 0: // Club
			go_into_club();
			break;
		case 1: // Coffee
			coffee_shop();
			break;
		case 2: // Be blue V
			accessory_shop();
			break;
		case 3: // Next Page (D-Pad Right)
			MallFacilities2();
			break;
		case 4: //Previous Page (D-Pad Left)
			MallFacilities3();
			break;
		case 5: //Town Map (Select)
			MallMap();
			break;
		case 20:
			return;
	}
}

void MallFacilities2()
{
	OPEN_MSG_WIN();
	MSG( Choose );
	//Close menu on Circle
	SEL_CHK_PAD(6,20);
	//Open map on Select
	SEL_CHK_PAD(8,5);
	//Next Page on D-Pad Right
	SEL_CHK_PAD(13,3);
	//Previous Page on D-Pad Left
	SEL_CHK_PAD(15,4);
	int select = SEL( MallFacilities2 );
	CLOSE_MSG_WIN();
	switch (select)
	{
		case 0: // Police Station
			police_box();
			break;
		case 1: // Karaoke
			karaoke_shop();
			break;
		case 2: // Antique Store
			antique_shop();
			break;
		case 3: // Next Page (D-Pad Right)
			MallFacilities3();
			break;
		case 4: //Previous Page (D-Pad Left)
			MallFacilities();
			break;
		case 5: //Town Map (Select)
			MallMap();
			break;
		case 20:
			return;
	}
}

void MallFacilities3()
{
	OPEN_MSG_WIN();
	MSG( Choose );
	//Close menu on Circle
	SEL_CHK_PAD(6,20);
	//Open map on Select
	SEL_CHK_PAD(8,5);
	//Next Page on D-Pad Right
	SEL_CHK_PAD(13,3);
	//Previous Page on D-Pad Left
	SEL_CHK_PAD(15,4);
	int select = SEL( MallFacilities3 );
	CLOSE_MSG_WIN();
	switch (select)
	{
		case 0: // Drug Store
			drugstore();
			break;
		case 1: // Crane Game
			ufo_catcher();
			break;
		case 2: // Arcade
			game_center();
			break;
		case 3: // Next Page (D-Pad Right)
			MallFacilities();
			break;
		case 4: //Previous Page (D-Pad Left)
			MallFacilities2();
			break;
		case 5: //Town Map (Select)
			MallMap();
			break;
		case 20:
			return;
	}
}

void IwatodaiTravel()
{
	OPEN_MSG_WIN();
	MSG( Choose );
	//Close menu on Circle
	SEL_CHK_PAD(6,20);
	//Open map on Select
	SEL_CHK_PAD(8,5);
	//Next Page on D-Pad Right
	SEL_CHK_PAD(13,3);
	//Previous Page on D-Pad Left
	SEL_CHK_PAD(15,4);
	//Open shops on Start
	SEL_CHK_PAD(11,6);
	int select = SEL( Iwatodai );
	CLOSE_MSG_WIN();
	switch (select)
	{
		case 0: // Iwatodai Station
			IwatodaiStation();
			break;
		case 1: // Iwatodai Strip Mall, Ground Floor
			IwatodaiGroundFloor();
			break;
		case 2: // Iwatodai Strip Mall, Upper Floors
			IwatodaiUpperFloor();
			break;
		case 3: // Next Page (D-Pad Right)
			IwatodaiTravel2();
			break;
		case 4: //Previous Page (D-Pad Left)
			IwatodaiTravel2();
			break;
		case 5: //Town Map (Select)
			BIT_ON( 0 + 0x0400 + 0x0800 + 19 );
			FADE( 1, 0 );
			FADE_SYNC();
			CALL_MAP( 3 );
			break;
		case 6: //Shops (Start)
			IwatodaiFacilities();
			break;
		case 20:
			return;
	}
}

void IwatodaiTravel2()
{
	OPEN_MSG_WIN();
	MSG( Choose );
	//Close menu on Circle
	SEL_CHK_PAD(6,20);
	//Open map on Select
	SEL_CHK_PAD(8,5);
	//Next Page on D-Pad Right
	SEL_CHK_PAD(13,3);
	//Previous Page on D-Pad Left
	SEL_CHK_PAD(15,4);
	//Open shops on Start
	SEL_CHK_PAD(11,6);
	int select = SEL( Iwatodai2 );
	CLOSE_MSG_WIN();
	switch (select)
	{
		case 0: // Facilities
			IwatodaiFacilities();
			break;
		case 1: // Town Map
			BIT_ON( 0 + 0x0400 + 0x0800 + 19 );
			FADE( 1, 0 );
			FADE_SYNC();
			CALL_MAP( 3 );
			break;
		case 2: // Next Page
			IwatodaiTravel();
			break;
		case 3: // Next Page (D-Pad Right)
			IwatodaiTravel();
			break;
		case 4: //Previous Page (D-Pad Left)
			IwatodaiTravel();
			break;
		case 5: //Town Map (Select)
			BIT_ON( 0 + 0x0400 + 0x0800 + 19 );
			FADE( 1, 0 );
			FADE_SYNC();
			CALL_MAP( 3 );
			break;
		case 6: //Shops (Start)
			IwatodaiFacilities();
			break;
		case 20:
			return;
	}
}

void IwatodaiStation()
{
    check_party_member();
    // bit id (0) + (297) = 297
    // bit id (0) + (165) = 165
    // bit id (0) + (166) = 166
    // bit id (0) + (167) = 167
    // bit id (0) + (168) = 168
    // bit id (0) + (169) = 169
    // bit id (0) + (308) = 308
    // bit id (0) + (698) = 698
    
    if ( ( ( GET_MONTH() == 10 ) && ( GET_DAY_OF_MONTH() == 4 ) ) && ( FUNCTION_0083() == 8 ) )
    {
        OPEN_MSG_WIN();
        
        if ( gVar21 == 3 )
        {
            MSG( GOTO_STATION );
            SEL_CHK_PAD( 6, 1 );
            
            if ( SEL( BOSS_SEL ) == 0 )
            {
                MSG( HUKA_LETS_GO );
                CLOSE_MSG_WIN();
                FADE( 2, 0 );
                FADE_SYNC();
                BIT_ON( ( 0 + 297 ) );
                CALL_EVENT( 266, 1, 0 );
                CALL_SFX( 3, 0 );
                FUNCTION_01C2();
                FUNCTION_01C3();
                CALL_BATTLE( 422 );
                FUNCTION_00A6();
                BIT_ON( ( 0 + 165 ) );
                CALL_EVENT( 268, 1, 0 );
                FUNCTION_0086( 0 );
                FUNCTION_0086( 1 );
                FUNCTION_0086( 2 );
                ADD_MEMBER( 0, PartyMember.Ken );
                BIT_ON( ( 0 + 166 ) );
                CALL_EVENT( 269, 1, 0 );
                BIT_ON( ( 0 + 167 ) );
                CALL_EVENT( 270, 1, 0 );
                BIT_ON( ( 0 + 168 ) );
                CALL_EVENT( 271, 1, 0 );
                BIT_ON( ( 0 + 169 ) );
                CALL_MOVIE( 14 );
                NS_MOVIE_SYNC();
                REMOVE_MEMBER( PartyMember.Ken );
                BIT_ON( ( 0 + 308 ) );
                CALL_EVENT( 140, 3, 0 );
                BIT_ON( ( 0 + 698 ) );
                NEXT_DAY();
                return;
            }

        }
        else 
        {
            MSG( STATION_STOP );
        }

        CLOSE_MSG_WIN();
        FADE( 5, 10 );
        FADE_SYNC();
        FLD_FUNCTION_0138( FUNCTION_0137( 0 ), 11 );
        FUNCTION_000C( 5 );
        FUNCTION_000D( 0 );
        FADE_SYNC();
    }
    else 
    {
        FADE( 2, 0 );
        FADE_SYNC();
        CALL_FIELD( 9, 2, 0, 0 );
    }

}

void IwatodaiGroundFloor()
{
    FADE( 2, 0 );
    FADE_SYNC();
    CALL_SFX( 2, 2 );
    CALL_FIELD( 9, 1, 8, 0 );
}

void IwatodaiUpperFloor()
{
    
    if ( ( ( GET_MONTH() == 10 ) && ( GET_DAY_OF_MONTH() == 4 ) ) && ( FUNCTION_0083() == 8 ) )
    {
        OPEN_MSG_WIN();
        MSG( OUT_STOP );
        CLOSE_MSG_WIN();
        FADE( 5, 10 );
        FADE_SYNC();
        FLD_FUNCTION_0138( FUNCTION_0137( 0 ), 13 );
        FUNCTION_000C( 5 );
        FUNCTION_000D( 0 );
        FADE_SYNC();
    }
    else 
    {
        FADE( 2, 0 );
        FADE_SYNC();
        CALL_SFX( 2, 2 );
        CALL_FIELD( 9, 7, 1, 0 );
        return;
    }

}

void IwatodaiFacilities()
{
	OPEN_MSG_WIN();
	MSG( Choose );
	//Open map on Select
	SEL_CHK_PAD(8,5);
	int select = SEL( IwatodaiFacilities );
	CLOSE_MSG_WIN();
	switch (select)
	{
		case 0: // Duck
			WildDuck();
			break;
		case 1: // Wakatsu
			Wakatsu();
			break;
		case 2: // Hagakure
			Hagakure();
			break;
		case 3: // Beef Bowl
			BeefBowl();
			break;
		case 5: //Town Map (Select)
			BIT_ON( 0 + 0x0400 + 0x0800 + 19 );
			FADE( 1, 0 );
			FADE_SYNC();
			CALL_MAP( 3 );
			break;
		case 20:
			return;
	}
}

void WildDuck()
{
    int var10;
    var10 = ( ( FUNCTION_000A( 299 ) + 100 ) / 100 );
    // bit id (0) + (257) = 257
    
    if ( ( ( GET_MONTH() == 10 ) && ( GET_DAY_OF_MONTH() == 4 ) ) && ( FUNCTION_0083() == 8 ) )
    {
        OPEN_MSG_WIN();
        
        if ( var10 == 1 )
        {
            MSG( SHOP_STOP_YUKARI );
        }
        else if ( var10 == 2 )
        {
            MSG( SHOP_STOP_AEGIS );
        }
        else 
        {
            MSG( SHOP_STOP_JUNPEI );
        }

        CLOSE_MSG_WIN();
    }
    else if ( ( ( GET_MONTH() == 4 ) && ( GET_DAY_OF_MONTH() == 21 ) ) && ( BIT_CHK( ( 0 + 257 ) ) == 0 ) )
    {
        OPEN_MSG_WIN();
        MSG( JUNPEI_STOP_BURGER );
        CLOSE_MSG_WIN();
        return;
    }
    else 
    {
        comu_burger_shop();
    }

}

void comu_burger_shop()
{
    
    if ( GET_DAY_OF_WEEK() == 4 )
    {
        OPEN_MSG_WIN();
        MSG( BURGER_TEIKYU );
        CLOSE_MSG_WIN();
        return;
    }

    OPEN_MSG_WIN();
    MSG( BURGER_ANNOUNCE );
    // bit id ((0) + (1024)) + (1568) = 2592
    // bit id ((0) + (1024)) + (1568) = 2592
    
    if ( BIT_CHK( ( ( 0 + 0x0400 ) + 1568 ) ) == 0 )
    {
        CLOSE_MSG_WIN();
        MSG_HELP( JIKANTUBUSI_TUTO );
        BIT_ON( ( ( 0 + 0x0400 ) + 1568 ) );
        OPEN_MSG_WIN();
    }

    MSG( BURGER_HAIRU );
    
    if ( GET_SOCIAL_RANK( 1, 2 ) == 6 )
    {
        MSG( YUUKI_MAX_NG );
    }

    MSG( BURGER_HAIRU02 );
    SEL_CHK_PAD( 6, 1 );
    // bit id ((0) + (1024)) + (1582) = 2606
    
    if ( SEL( YESNO_SEL ) == 0 )
    {
        
        if ( GET_YEN() < 500 )
        {
            MSG( MONEY_TARINAI );
            CLOSE_MSG_WIN();
            return;
        }
        else 
        {
            CLOSE_MSG_WIN();
            REMOVE_YEN( 500 );
            CALL_SFX( 2, 43 );
            FLD_FUNCTION_0089( 10241, 0, 0, 0, 1.00f );
            FADE( 2, 0 );
            FADE_SYNC();
            BIT_ON( ( ( 0 + 0x0400 ) + 1582 ) );
            CALL_EVENT( 842, 2, 0 );
            CALL_FIELD( 9, 1, 5, 0 );
            return;
        }

    }

}

void Wakatsu()
{
    // bit id (0) + (257) = 257
    
    if ( ( ( GET_MONTH() == 4 ) && ( GET_DAY_OF_MONTH() == 21 ) ) && ( BIT_CHK( ( 0 + 257 ) ) == 0 ) )
    {
        OPEN_MSG_WIN();
        MSG( JUNPEI_STOP_RESTAURANT );
        CLOSE_MSG_WIN();
        return;
    }
    else 
    {
        comu_restaurant();
    }

}

void comu_restaurant()
{
    
    if ( GET_DAY_OF_WEEK() == 2 )
    {
        OPEN_MSG_WIN();
        MSG( WASHOKU_TEIKYU );
        CLOSE_MSG_WIN();
        return;
    }

    OPEN_MSG_WIN();
    MSG( WASHOKU_ANNOUNCE );
    // bit id ((0) + (1024)) + (1568) = 2592
    // bit id ((0) + (1024)) + (1568) = 2592
    
    if ( BIT_CHK( ( ( 0 + 0x0400 ) + 1568 ) ) == 0 )
    {
        CLOSE_MSG_WIN();
        MSG_HELP( JIKANTUBUSI_TUTO );
        BIT_ON( ( ( 0 + 0x0400 ) + 1568 ) );
        OPEN_MSG_WIN();
    }

    MSG( WASHOKU_HAIRU );
    
    if ( GET_SOCIAL_RANK( 1, 0 ) == 6 )
    {
        MSG( GAKURYOKU_MAX_NG );
    }

    MSG( WASHOKU_HAIRU02 );
    SEL_CHK_PAD( 6, 1 );
    // bit id ((0) + (1024)) + (1582) = 2606
    
    if ( SEL( YESNO_SEL ) == 0 )
    {
        
        if ( GET_YEN() < 680 )
        {
            MSG( MONEY_TARINAI );
            CLOSE_MSG_WIN();
            return;
        }
        else 
        {
            CLOSE_MSG_WIN();
            REMOVE_YEN( 680 );
            CALL_SFX( 2, 9 );
            FLD_FUNCTION_0089( 10244, 0, 0, 0, 1.00f );
            FADE( 2, 0 );
            FADE_SYNC();
            BIT_ON( ( ( 0 + 0x0400 ) + 1582 ) );
            CALL_EVENT( 842, 4, 0 );
            CALL_FIELD( 9, 7, 2, 0 );
            return;
        }

    }

}

void Hagakure()
{
    // bit id (0) + (257) = 257
    
    if ( ( ( GET_MONTH() == 4 ) && ( GET_DAY_OF_MONTH() == 21 ) ) && ( BIT_CHK( ( 0 + 257 ) ) == 0 ) )
    {
        OPEN_MSG_WIN();
        MSG( JUNPEI_STOP_RAMEN );
        CLOSE_MSG_WIN();
        return;
    }
    else 
    {
        comu_ramen_shop();
    }

}

void comu_ramen_shop()
{
    
    if ( ( GET_DAY_OF_WEEK() == 6 ) || ( GET_DAY_OF_WEEK() == 7 ) )
    {
        OPEN_MSG_WIN();
        MSG( RAMEN_TEIKYU );
        CLOSE_MSG_WIN();
        return;
    }

    OPEN_MSG_WIN();
    MSG( RAMEN_ANNOUNCE );
    // bit id ((0) + (1024)) + (1568) = 2592
    // bit id ((0) + (1024)) + (1568) = 2592
    
    if ( BIT_CHK( ( ( 0 + 0x0400 ) + 1568 ) ) == 0 )
    {
        CLOSE_MSG_WIN();
        MSG_HELP( JIKANTUBUSI_TUTO );
        BIT_ON( ( ( 0 + 0x0400 ) + 1568 ) );
        OPEN_MSG_WIN();
    }

    MSG( RAMEN_HAIRU );
    
    if ( GET_SOCIAL_RANK( 1, 1 ) == 6 )
    {
        MSG( MIRYOKU_MAX_NG );
    }

    MSG( RAMEN_HAIRU02 );
    SEL_CHK_PAD( 6, 1 );
    // bit id ((0) + (1024)) + (1582) = 2606
    
    if ( SEL( YESNO_SEL ) == 0 )
    {
        
        if ( GET_YEN() < 900 )
        {
            MSG( MONEY_TARINAI );
            CLOSE_MSG_WIN();
            return;
        }
        else 
        {
            CLOSE_MSG_WIN();
            REMOVE_YEN( 900 );
            CALL_SFX( 2, 6 );
            FLD_FUNCTION_0089( 10243, 0, 0, 0, 1.00f );
            FADE( 2, 0 );
            FADE_SYNC();
            BIT_ON( ( ( 0 + 0x0400 ) + 1582 ) );
            CALL_EVENT( 842, 3, 0 );
            CALL_FIELD( 9, 7, 3, 0 );
            return;
        }

    }

}

void BeefBowl()
{
    // bit id (0) + (257) = 257
    
    if ( ( ( GET_MONTH() == 4 ) && ( GET_DAY_OF_MONTH() == 21 ) ) && ( BIT_CHK( ( 0 + 257 ) ) == 0 ) )
    {
        OPEN_MSG_WIN();
        MSG( JUNPEI_STOP_BEEF );
        CLOSE_MSG_WIN();
        return;
    }
    else 
    {
        comu_beef_bowl_bar();
    }

}

void comu_beef_bowl_bar()
{
    OPEN_MSG_WIN();
    MSG( GYUDON_SETUMEI );
    CLOSE_MSG_WIN();
}

void PortIslandTravel()
{
	OPEN_MSG_WIN();
	MSG( Choose );
	//Close menu on Circle
	SEL_CHK_PAD(6,20);
	//Open map on Select
	SEL_CHK_PAD(8,5);
	//Open shops on Start
	SEL_CHK_PAD(11,6);
	int select = SEL( PortIsland );
	CLOSE_MSG_WIN();
	if (select < 2)
	{
		FADE( 3, 0 );
		FADE_SYNC();
		BIT_ON( 0 + 0x0400 + 0x0800 + 0x0400 + 0x0400 + 7 );
	}
	switch (select)
	{
		case 0: // Port Island Station
			CALL_FIELD( 10, 1, 0, 0 );
			break;
		case 1: // Station Outskirts
			CALL_FIELD( 10, 2, 0, 0 );
			break;
		case 2: // Facilities
			PortFacilities();
			break;
		case 3: 
			BIT_ON( 0 + 0x0400 + 0x0800 + 19 );
			FADE( 1, 0 );
			FADE_SYNC();
			CALL_MAP( 2 );
			break;
		case 5: // Town Map (Select)
			BIT_ON( 0 + 0x0400 + 0x0800 + 19 );
			FADE( 1, 0 );
			FADE_SYNC();
			CALL_MAP( 2 );
			break;
		case 6: // Shops (Start)
			PortFacilities();
			break;
		case 20:
			return;
	}
}

void PortFacilities()
{
	OPEN_MSG_WIN();
	MSG( Choose );
	//Close menu on Circle
	SEL_CHK_PAD(6,20);
	//Open map on Select
	SEL_CHK_PAD(8,5);
	int select = SEL( PortFacilities );
	CLOSE_MSG_WIN();
	switch (select)
	{
		case 0: // Flower
			FlowerShop();
			break;
		case 1: // Theater
			movie_theater();
			break;
		case 5: // Town Map (Select)
			BIT_ON( 0 + 0x0400 + 0x0800 + 19 );
			FADE( 1, 0 );
			FADE_SYNC();
			CALL_MAP( 2 );
			break;
		case 20:
			return;
	}
}

void FlowerShop()
{
    int var0;
    int var1;
    int var3;
    int var2;
    OPEN_MSG_WIN();
    MSG( MSG_NPC000_FST );
    QUESTION1:
    SEL_CHK_PAD( 6, 3 );
    var0 = SEL( MSG_NPC000_SEL1 );
    
    if ( var0 == 0 )
    {
        var1 = ( 4000 + 80 );
        SET_MSG_VAR( 0, var1, 3 );
        MSG( MSG_NPC000_FLOWER1 );
        
        if ( SEL( MSG_NPC000_YESNO ) == 0 )
        {
            var3 = 2000;
            goto BUYIT;
        }
        else 
        {
            MSG( MSG_NPC000_FST2 );
            goto QUESTION1;
        }

    }
    else if ( var0 == 1 )
    {
        var1 = ( 4000 + 81 );
        SET_MSG_VAR( 0, var1, 3 );
        MSG( MSG_NPC000_FLOWER2 );
        
        if ( SEL( MSG_NPC000_YESNO ) == 0 )
        {
            var3 = 3000;
            goto BUYIT;
        }
        else 
        {
            MSG( MSG_NPC000_FST2 );
            goto QUESTION1;
        }

    }
    else if ( var0 == 2 )
    {
        goto QUESTION2;
    }
    else 
    {
        MSG( MSG_NPC000_BYE );
        CLOSE_MSG_WIN();
        return;
    }

    QUESTION2:
    SEL_CHK_PAD( 6, 3 );
    var0 = SEL( MSG_NPC000_SEL2 );
    
    if ( var0 == 0 )
    {
        var1 = ( 4000 + 82 );
        SET_MSG_VAR( 0, var1, 3 );
        MSG( MSG_NPC000_FLOWER3 );
        
        if ( SEL( MSG_NPC000_YESNO ) == 0 )
        {
            var3 = 4000;
            goto BUYIT;
        }
        else 
        {
            MSG( MSG_NPC000_FST2 );
            goto QUESTION2;
        }

    }
    else if ( var0 == 1 )
    {
        var1 = ( 4000 + 83 );
        SET_MSG_VAR( 0, var1, 3 );
        MSG( MSG_NPC000_FLOWER4 );
        
        if ( SEL( MSG_NPC000_YESNO ) == 0 )
        {
            var3 = 5000;
            goto BUYIT;
        }
        else 
        {
            MSG( MSG_NPC000_FST2 );
            goto QUESTION2;
        }

    }
    else if ( var0 == 2 )
    {
        goto QUESTION1;
    }
    else 
    {
        MSG( MSG_NPC000_BYE );
        CLOSE_MSG_WIN();
        return;
    }

    BUYIT:
    SET_MSG_VAR( 0, var1, 3 );
    var2 = GET_ITEM( 1, var1 );
    
    if ( var2 == 99 )
    {
        MSG( MSG_NPC000_DONTHAVE );
        CLOSE_MSG_WIN();
        return;
    }
    else if ( GET_YEN() <= var3 )
    {
        MSG( MSG_NPC000_NOMONEY );
        CLOSE_MSG_WIN();
        return;
    }
    else 
    {
        var2 = ( var2 + 1 );
        SET_ITEM( 1, var1, var2 );
        REMOVE_YEN( var3 );
        MSG( MSG_NPC000_THANKS );
        CLOSE_MSG_WIN();
        return;
    }

    CLOSE_MSG_WIN();
}

void movie_theater()
{
    // bit id (0) + (257) = 257
    
    if ( ( ( GET_MONTH() == 4 ) && ( GET_DAY_OF_MONTH() == 21 ) ) && ( BIT_CHK( ( 0 + 257 ) ) == 0 ) )
    {
        OPEN_MSG_WIN();
        MSG( JUNPEI_STOP_THEATER );
        CLOSE_MSG_WIN();
        return;
    }
    else 
    {
        comu_movie_theater();
    }

}

void comu_movie_theater()
{
    
    if ( GET_DAY_OF_WEEK() == 3 )
    {
        OPEN_MSG_WIN();
        MSG( MOVIE_TEIKYU );
        CLOSE_MSG_WIN();
        return;
    }

    OPEN_MSG_WIN();
    MSG( MOVIE_THEATER );
    // bit id ((0) + (1024)) + (1568) = 2592
    // bit id ((0) + (1024)) + (1568) = 2592
    
    if ( BIT_CHK( ( ( 0 + 0x0400 ) + 1568 ) ) == 0 )
    {
        CLOSE_MSG_WIN();
        MSG_HELP( JIKANTUBUSI_TUTO );
        BIT_ON( ( ( 0 + 0x0400 ) + 1568 ) );
        OPEN_MSG_WIN();
    }

    
    if ( ( ( GET_MONTH() == 4 ) || ( GET_MONTH() == 8 ) ) || ( GET_MONTH() == 12 ) )
    {
        MSG( MOVIE_PROGRAM_02 );
        
        if ( GET_SOCIAL_RANK( 1, 2 ) == 6 )
        {
            MSG( YUUKI_MAX_NG );
        }

    }
    else if ( ( ( GET_MONTH() == 5 ) || ( GET_MONTH() == 9 ) ) || ( GET_MONTH() == 1 ) )
    {
        MSG( MOVIE_PROGRAM_01 );
        
        if ( GET_SOCIAL_RANK( 1, 1 ) == 6 )
        {
            MSG( MIRYOKU_MAX_NG );
        }

    }
    else if ( ( GET_MONTH() == 6 ) || ( GET_MONTH() == 10 ) )
    {
        MSG( MOVIE_PROGRAM_04 );
        
        if ( GET_SOCIAL_RANK( 1, 2 ) == 6 )
        {
            MSG( YUUKI_MAX_NG );
        }

    }
    else 
    {
        MSG( MOVIE_PROGRAM_03 );
        
        if ( GET_SOCIAL_RANK( 1, 1 ) == 6 )
        {
            MSG( MIRYOKU_MAX_NG );
        }

    }

    MSG( MOVIE_PROGRAM_CONTINUE );
    SEL_CHK_PAD( 6, 1 );
    
    if ( SEL( YESNO_SEL ) == 0 )
    {
        
        if ( GET_YEN() < 1500 )
        {
            MSG( MONEY_TARINAI );
            CLOSE_MSG_WIN();
            return;
        }
        else 
        {
            CLOSE_MSG_WIN();
            REMOVE_YEN( 1500 );
            FADE( 1, 0 );
            FADE_SYNC();
            FLD_FUNCTION_0138( FUNCTION_0137( 0 ), 2 );
            FUNCTION_000C( 10 );
            OPEN_MSG_WIN();
            MSG( MOVIE_CONTINUE );
            CLOSE_MSG_WIN();
            FUNCTION_000C( 10 );
            FUNCTION_000D( 0 );
            FADE_SYNC();
            OPEN_MSG_WIN();
            
            if ( ( ( GET_MONTH() == 4 ) || ( GET_MONTH() == 8 ) ) || ( GET_MONTH() == 12 ) )
            {
                MSG( MOVIE_END_02 );
                FUNCTION_00B9( 0, 21 );
                CALL_SFX( 4, 3 );
                MSG( YUUKI_UP );
                
                if ( CHANGE_SOCIAL_STAT( 2, 4 ) == 1 )
                {
                    MSG( PARAM_RANK_UP_YUUKI );
                }

            }
            else if ( ( ( GET_MONTH() == 5 ) || ( GET_MONTH() == 9 ) ) || ( GET_MONTH() == 1 ) )
            {
                MSG( MOVIE_END_01 );
                FUNCTION_00B9( 0, 21 );
                CALL_SFX( 4, 3 );
                MSG( MIRYOKU_UP );
                
                if ( CHANGE_SOCIAL_STAT( 1, 4 ) == 1 )
                {
                    MSG( PARAM_RANK_UP_MIRYOKU );
                }

            }
            else if ( ( GET_MONTH() == 6 ) || ( GET_MONTH() == 10 ) )
            {
                MSG( MOVIE_END_04 );
                FUNCTION_00B9( 0, 21 );
                CALL_SFX( 4, 3 );
                MSG( YUUKI_UP );
                
                if ( CHANGE_SOCIAL_STAT( 2, 4 ) == 1 )
                {
                    MSG( PARAM_RANK_UP_YUUKI );
                }

            }
            else 
            {
                MSG( MOVIE_END_03 );
                FUNCTION_00B9( 0, 21 );
                CALL_SFX( 4, 3 );
                MSG( MIRYOKU_UP );
                
                if ( CHANGE_SOCIAL_STAT( 1, 4 ) == 1 )
                {
                    MSG( PARAM_RANK_UP_MIRYOKU );
                }

            }

            MSG( RYOU_KAERU );
            CLOSE_MSG_WIN();
            FADE( 1, 0 );
            FADE_SYNC();
            NEXT_DAY();
            return;
        }

    }

}

void call_midnight_myroom()
{
    // bit id (((0) + (1024)) + (2048)) + (14) = 3086
    // bit id (((0) + (1024)) + (2048)) + (14) = 3086
    
    if ( ( CHECK_TIME_SPAN( 4, 21, 3, 5 ) == 1 ) && ( BIT_CHK( ( ( ( 0 + 0x0400 ) + 0x0800 ) + 14 ) ) == 0 ) )
    {
        BIT_ON( ( ( ( 0 + 0x0400 ) + 0x0800 ) + 14 ) );
    }

    FUNCTION_0186( 15 );
    FADE( 1, 0 );
    FADE_SYNC();
    // bit id (0) + (9) = 9
    
    if ( ( GET_MONTH() == 4 ) && ( GET_DAY_OF_MONTH() == 7 ) )
    {
        BIT_ON( ( 0 + 9 ) );
        CALL_EVENT( 117, 1, 0 );
    }

    NEXT_DAY();
}

void go_into_club()
{
    check_party_member();
    // bit id (0) + (151) = 151
    // bit id (0) + (299) = 299
    // bit id (0) + (152) = 152
    // bit id ((((0) + (1024)) + (2048)) + (1024)) + (540) = 4636
    // bit id (0) + (257) = 257
    
    if ( ( ( GET_MONTH() == 9 ) && ( GET_DAY_OF_MONTH() == 5 ) ) && ( FUNCTION_0083() == 8 ) )
    {
        OPEN_MSG_WIN();
        
        if ( gVar21 == 3 )
        {
            MSG( GO_INTO_CLUB );
            SEL_CHK_PAD( 6, 1 );
            
            if ( SEL( BOSS_SEL ) == 0 )
            {
                MSG( HUKA_LETS_GO );
                CLOSE_MSG_WIN();
                FADE( 2, 0 );
                FADE_SYNC();
                BIT_ON( ( 0 + 151 ) );
                CALL_EVENT( 254, 2, 0 );
                CALL_SFX( 3, 0 );
                FUNCTION_01C2();
                FUNCTION_01C3();
                CALL_BATTLE( 421 );
                FUNCTION_00A6();
                BIT_ON( ( 0 + 299 ) );
                CALL_EVENT( 254, 3, 0 );
                BIT_ON( ( 0 + 152 ) );
                CALL_EVENT( 255, 1, 0 );
                FUNCTION_0086( 0 );
                FUNCTION_0086( 1 );
                FUNCTION_0086( 2 );
                BIT_ON( ( ( ( ( 0 + 0x0400 ) + 0x0800 ) + 0x0400 ) + 540 ) );
                NEXT_DAY();
                return;
            }

        }
        else 
        {
            MSG( CLUB_STOP );
        }

        CLOSE_MSG_WIN();
    }
    else if ( FUNCTION_0083() == 6 )
    {
        CALL_SFX( 2, 8 );
        FLD_FUNCTION_0089( 10255, 0, 0, 0, 1 );
        FADE( 2, 0 );
        FADE_SYNC();
        CALL_FIELD( 8, 2, 0, 0 );
        return;
    }
    else 
    {
        OPEN_MSG_WIN();
        MSG( CLUB_NOT_OPEN );
        
        if ( ( ( GET_MONTH() == 4 ) && ( GET_DAY_OF_MONTH() == 21 ) ) && ( BIT_CHK( ( 0 + 257 ) ) == 0 ) )
        {
            MSG( JUNPEI_COMMENT_CLUB );
        }

        CLOSE_MSG_WIN();
    }

}

void accessory_shop()
{
    int var14;
    var14 = ( ( FUNCTION_000A( 499 ) + 100 ) / 100 );
    // bit id (0) + (257) = 257
    // bit id (((0) + (1024)) + (2048)) + (34) = 3106
    // bit id (((((0) + (1024)) + (2048)) + (1024)) + (1024)) + (7) = 5127
    // bit id (((((0) + (1024)) + (2048)) + (1024)) + (1024)) + (7) = 5127
    
    if ( ( ( GET_MONTH() == 9 ) && ( GET_DAY_OF_MONTH() == 5 ) ) && ( FUNCTION_0083() == 8 ) )
    {
        OPEN_MSG_WIN();
        
        if ( var14 == 1 )
        {
            MSG( SHOP_STOP_YUKARI );
        }
        else if ( var14 == 2 )
        {
            MSG( SHOP_STOP_AEGIS );
        }
        else if ( var14 == 3 )
        {
            MSG( SHOP_STOP_SANADA );
        }
        else if ( var14 == 4 )
        {
            MSG( SHOP_STOP_ARAGAKI );
        }
        else 
        {
            MSG( SHOP_STOP_AMADA );
        }

        CLOSE_MSG_WIN();
    }
    else if ( CHECK_TIME_SPAN( 3, 1, 3, 5 ) == 1 )
    {
        OPEN_MSG_WIN();
        MSG( STOP_INTO_SHOP );
        CLOSE_MSG_WIN();
    }
    else if ( ( ( GET_MONTH() == 4 ) && ( GET_DAY_OF_MONTH() == 21 ) ) && ( BIT_CHK( ( 0 + 257 ) ) == 0 ) )
    {
        OPEN_MSG_WIN();
        MSG( JUNPEI_COMMENT_ACCESSORY );
        CLOSE_MSG_WIN();
    }
    else if ( ( FUNCTION_0083() == 6 ) && ( BIT_CHK( ( ( ( 0 + 0x0400 ) + 0x0800 ) + 34 ) ) != 1 ) )
    {
        OPEN_MSG_WIN();
        MSG( ACCESSORY_SHOP_CLOSE );
        CLOSE_MSG_WIN();
    }
    else 
    {
        CALL_SFX( 2, 8 );
        FLD_FUNCTION_0089( 10253, 0, 0, 0, 1 );
        FADE( 2, 0 );
        FADE_SYNC();
        BIT_ON( ( ( ( ( ( 0 + 0x0400 ) + 0x0800 ) + 0x0400 ) + 0x0400 ) + 7 ) );
        CALL_FCL( 1 );
        FUNCTION_002B();
        BIT_OFF( ( ( ( ( ( 0 + 0x0400 ) + 0x0800 ) + 0x0400 ) + 0x0400 ) + 7 ) );
        CALL_FIELD( 8, 1, 5, 0 );
        return;
    }

}

void drugstore()
{
    int var18;
    var18 = ( ( FUNCTION_000A( 499 ) + 100 ) / 100 );
    // bit id (0) + (257) = 257
    // bit id (((((0) + (1024)) + (2048)) + (1024)) + (1024)) + (7) = 5127
    // bit id (((((0) + (1024)) + (2048)) + (1024)) + (1024)) + (7) = 5127
    
    if ( ( ( GET_MONTH() == 9 ) && ( GET_DAY_OF_MONTH() == 5 ) ) && ( FUNCTION_0083() == 8 ) )
    {
        OPEN_MSG_WIN();
        
        if ( var18 == 1 )
        {
            MSG( SHOP_STOP_YUKARI );
        }
        else if ( var18 == 2 )
        {
            MSG( SHOP_STOP_AEGIS );
        }
        else if ( var18 == 3 )
        {
            MSG( SHOP_STOP_SANADA );
        }
        else if ( var18 == 4 )
        {
            MSG( SHOP_STOP_ARAGAKI );
        }
        else 
        {
            MSG( SHOP_STOP_AMADA );
        }

        CLOSE_MSG_WIN();
    }
    else if ( CHECK_TIME_SPAN( 3, 1, 3, 5 ) == 1 )
    {
        OPEN_MSG_WIN();
        MSG( STOP_INTO_SHOP );
        CLOSE_MSG_WIN();
    }
    else if ( ( ( GET_MONTH() == 4 ) && ( GET_DAY_OF_MONTH() == 21 ) ) && ( BIT_CHK( ( 0 + 257 ) ) == 0 ) )
    {
        OPEN_MSG_WIN();
        MSG( JUNPEI_STOP_DRUGSTORE );
        CLOSE_MSG_WIN();
    }
    else 
    {
        CALL_SFX( 2, 8 );
        FLD_FUNCTION_0089( 10249, 0, 0, 0, 1 );
        FADE( 2, 0 );
        FADE_SYNC();
        BIT_ON( ( ( ( ( ( 0 + 0x0400 ) + 0x0800 ) + 0x0400 ) + 0x0400 ) + 7 ) );
        CALL_FCL( 2 );
        FUNCTION_002B();
        BIT_OFF( ( ( ( ( ( 0 + 0x0400 ) + 0x0800 ) + 0x0400 ) + 0x0400 ) + 7 ) );
        CALL_FIELD( 8, 1, 10, 0 );
        return;
    }

}

void police_box()
{
    int var15;
    var15 = ( ( FUNCTION_000A( 499 ) + 100 ) / 100 );
    // bit id (0) + (257) = 257
    // bit id (((0) + (1024)) + (2048)) + (34) = 3106
    
    if ( ( ( GET_MONTH() == 9 ) && ( GET_DAY_OF_MONTH() == 5 ) ) && ( FUNCTION_0083() == 8 ) )
    {
        OPEN_MSG_WIN();
        
        if ( var15 == 1 )
        {
            MSG( SHOP_STOP_YUKARI );
        }
        else if ( var15 == 2 )
        {
            MSG( SHOP_STOP_AEGIS );
        }
        else if ( var15 == 3 )
        {
            MSG( SHOP_STOP_SANADA );
        }
        else if ( var15 == 4 )
        {
            MSG( SHOP_STOP_ARAGAKI );
        }
        else 
        {
            MSG( SHOP_STOP_AMADA );
        }

        CLOSE_MSG_WIN();
        return;
    }
    else if ( ( ( GET_MONTH() == 4 ) && ( GET_DAY_OF_MONTH() == 21 ) ) && ( BIT_CHK( ( 0 + 257 ) ) == 0 ) )
    {
        OPEN_MSG_WIN();
        MSG( INTO_POLICEBOX_OK );
        SEL_CHK_PAD( 6, 1 );
        
        if ( SEL( INTO_SEL ) == 1 )
        {
            CLOSE_MSG_WIN();
            return;
        }

        CLOSE_MSG_WIN();
    }
    else if ( CHECK_TIME_SPAN( 3, 1, 3, 5 ) == 1 )
    {
        OPEN_MSG_WIN();
        MSG( STOP_INTO_SHOP );
        CLOSE_MSG_WIN();
        return;
    }
    else if ( ( FUNCTION_0083() == 6 ) && ( BIT_CHK( ( ( ( 0 + 0x0400 ) + 0x0800 ) + 34 ) ) != 1 ) )
    {
        OPEN_MSG_WIN();
        MSG( POLICEMAN_NOT_HERE );
        CLOSE_MSG_WIN();
        return;
    }

    CALL_SFX( 2, 8 );
    FLD_FUNCTION_0089( 10252, 0, 0, 0, 1 );
    FADE( 2, 0 );
    FADE_SYNC();
    // bit id (0) + (257) = 257
    // bit id (0) + (416) = 416
    // bit id (0) + (257) = 257
    
    if ( ( ( GET_MONTH() == 4 ) && ( GET_DAY_OF_MONTH() == 21 ) ) && ( BIT_CHK( ( 0 + 257 ) ) == 0 ) )
    {
        BIT_OFF( ( 0 + 416 ) );
        REMOVE_MEMBER( PartyMember.Junpei );
        GIVE_YEN( 5000 );
        BIT_ON( ( 0 + 257 ) );
        CALL_EVENT( 131, 2, 0 );
    }
    else 
    {
        FUNCTION_0019( CMN_FUNCTION_0017( 61, 0 ) );
    }

    // bit id (((((0) + (1024)) + (2048)) + (1024)) + (1024)) + (7) = 5127
    BIT_ON( ( ( ( ( ( 0 + 0x0400 ) + 0x0800 ) + 0x0400 ) + 0x0400 ) + 7 ) );
    CALL_FCL( 0 );
    FUNCTION_002B();
    // bit id (((((0) + (1024)) + (2048)) + (1024)) + (1024)) + (7) = 5127
    BIT_OFF( ( ( ( ( ( 0 + 0x0400 ) + 0x0800 ) + 0x0400 ) + 0x0400 ) + 7 ) );
    CALL_FIELD( 8, 1, 6, 0 );
}

void coffee_shop()
{
    int var13;
    var13 = ( ( FUNCTION_000A( 499 ) + 100 ) / 100 );
    // bit id (0) + (257) = 257
    
    if ( ( ( GET_MONTH() == 9 ) && ( GET_DAY_OF_MONTH() == 5 ) ) && ( FUNCTION_0083() == 8 ) )
    {
        OPEN_MSG_WIN();
        
        if ( var13 == 1 )
        {
            MSG( SHOP_STOP_YUKARI );
        }
        else if ( var13 == 2 )
        {
            MSG( SHOP_STOP_AEGIS );
        }
        else if ( var13 == 3 )
        {
            MSG( SHOP_STOP_SANADA );
        }
        else if ( var13 == 4 )
        {
            MSG( SHOP_STOP_ARAGAKI );
        }
        else 
        {
            MSG( SHOP_STOP_AMADA );
        }

        CLOSE_MSG_WIN();
    }
    else if ( ( ( GET_MONTH() == 4 ) && ( GET_DAY_OF_MONTH() == 21 ) ) && ( BIT_CHK( ( 0 + 257 ) ) == 0 ) )
    {
        OPEN_MSG_WIN();
        MSG( JUNPEI_STOP_COFFEE );
        CLOSE_MSG_WIN();
        return;
    }
    else 
    {
        comu_coffee_shop();
    }

}

void comu_coffee_shop()
{
    
    if ( ( GET_DAY_OF_WEEK() == 1 ) || ( GET_DAY_OF_WEEK() == 2 ) )
    {
        
        if ( ( FUNCTION_0083() == 5 ) || ( FUNCTION_0083() == 4 ) )
        {
            OPEN_MSG_WIN();
            MSG( COFFEE_TEIKYU );
            CLOSE_MSG_WIN();
            return;
        }

    }

    
    if ( ( ( GET_MONTH() == 1 ) && ( GET_DAY_OF_MONTH() == 31 ) ) && ( FUNCTION_0083() == 6 ) )
    {
        OPEN_MSG_WIN();
        MSG( COFFEE_TEIKYU );
        CLOSE_MSG_WIN();
        return;
    }

    OPEN_MSG_WIN();
    MSG( COFFEE_ANNOUNCE );
    // bit id ((0) + (1024)) + (1568) = 2592
    // bit id ((0) + (1024)) + (1568) = 2592
    
    if ( BIT_CHK( ( ( 0 + 0x0400 ) + 1568 ) ) == 0 )
    {
        CLOSE_MSG_WIN();
        MSG_HELP( JIKANTUBUSI_TUTO );
        BIT_ON( ( ( 0 + 0x0400 ) + 1568 ) );
        OPEN_MSG_WIN();
    }

    MSG( COFFEE_MENU );
    
    if ( GET_SOCIAL_RANK( 1, 1 ) == 6 )
    {
        MSG( MIRYOKU_MAX_NG );
    }

    
    if ( FUNCTION_0083() == 6 )
    {
        MSG( HAIRU_SINYA );
    }
    else 
    {
        MSG( HAIRU_YORU );
    }

    SEL_CHK_PAD( 6, 1 );
    // bit id ((0) + (1024)) + (1582) = 2606
    
    if ( SEL( YESNO_SEL ) == 0 )
    {
        
        if ( GET_YEN() < 500 )
        {
            MSG( MONEY_TARINAI );
            CLOSE_MSG_WIN();
            return;
        }
        else 
        {
            CLOSE_MSG_WIN();
            REMOVE_YEN( 500 );
            FADE( 2, 0 );
            FADE_SYNC();
            BIT_ON( ( ( 0 + 0x0400 ) + 1582 ) );
            CALL_EVENT( 842, 1, 0 );
            CALL_FIELD( 8, 1, 4, 0 );
            return;
        }

    }

}

void karaoke_shop()
{
    int var16;
    var16 = ( ( FUNCTION_000A( 499 ) + 100 ) / 100 );
    // bit id (0) + (257) = 257
    
    if ( ( ( GET_MONTH() == 9 ) && ( GET_DAY_OF_MONTH() == 5 ) ) && ( FUNCTION_0083() == 8 ) )
    {
        OPEN_MSG_WIN();
        
        if ( var16 == 1 )
        {
            MSG( SHOP_STOP_YUKARI );
        }
        else if ( var16 == 2 )
        {
            MSG( SHOP_STOP_AEGIS );
        }
        else if ( var16 == 3 )
        {
            MSG( SHOP_STOP_SANADA );
        }
        else if ( var16 == 4 )
        {
            MSG( SHOP_STOP_ARAGAKI );
        }
        else 
        {
            MSG( SHOP_STOP_AMADA );
        }

        CLOSE_MSG_WIN();
    }
    else if ( ( ( GET_MONTH() == 4 ) && ( GET_DAY_OF_MONTH() == 21 ) ) && ( BIT_CHK( ( 0 + 257 ) ) == 0 ) )
    {
        OPEN_MSG_WIN();
        MSG( JUNPEI_STOP_KARAOKE );
        CLOSE_MSG_WIN();
        return;
    }
    else 
    {
        comu_karaoke_shop();
    }

}

void comu_karaoke_shop()
{
    
    if ( ( GET_DAY_OF_WEEK() == 5 ) || ( GET_DAY_OF_WEEK() == 6 ) )
    {
        OPEN_MSG_WIN();
        MSG( KARAOKE_NG );
        CLOSE_MSG_WIN();
        return;
    }

    
    if ( ( ( GET_MONTH() == 1 ) && ( GET_DAY_OF_MONTH() == 31 ) ) && ( FUNCTION_0083() == 6 ) )
    {
        OPEN_MSG_WIN();
        MSG( KARAOKE_NG );
        CLOSE_MSG_WIN();
        return;
    }

    OPEN_MSG_WIN();
    MSG( KARAOKE_ANNOUNCE );
    // bit id ((0) + (1024)) + (1568) = 2592
    // bit id ((0) + (1024)) + (1568) = 2592
    
    if ( BIT_CHK( ( ( 0 + 0x0400 ) + 1568 ) ) == 0 )
    {
        CLOSE_MSG_WIN();
        MSG_HELP( JIKANTUBUSI_TUTO );
        BIT_ON( ( ( 0 + 0x0400 ) + 1568 ) );
        OPEN_MSG_WIN();
    }

    MSG( KARAOKE_MENU );
    
    if ( GET_SOCIAL_RANK( 1, 2 ) == 6 )
    {
        MSG( YUUKI_MAX_NG );
    }

    
    if ( FUNCTION_0083() == 6 )
    {
        MSG( HAIRU_SINYA );
    }
    else 
    {
        MSG( HAIRU_YORU );
    }

    SEL_CHK_PAD( 6, 1 );
    
    if ( SEL( YESNO_SEL ) == 0 )
    {
        
        if ( GET_YEN() < 800 )
        {
            MSG( MONEY_TARINAI );
            CLOSE_MSG_WIN();
            return;
        }
        else 
        {
            CLOSE_MSG_WIN();
            REMOVE_YEN( 800 );
            FADE( 2, 0 );
            FADE_SYNC();
            FLD_FUNCTION_0138( FUNCTION_0137( 0 ), 8 );
            FUNCTION_000C( 10 );
            OPEN_MSG_WIN();
            MSG( KARAOKE_CONTINUE );
            CLOSE_MSG_WIN();
            FUNCTION_000D( 0 );
            FADE_SYNC();
            OPEN_MSG_WIN();
            MSG( KARAOKE_END );
            FUNCTION_00B9( 0, 21 );
            CALL_SFX( 4, 3 );
            MSG( YUUKI_UP );
            
            if ( CHANGE_SOCIAL_STAT( 2, 2 ) == 1 )
            {
                MSG( PARAM_RANK_UP_YUUKI );
            }

            
            if ( FUNCTION_0083() == 6 )
            {
                MSG( RYOU_KAERU_SINYA );
            }
            else 
            {
                MSG( RYOU_KAERU );
            }

            CLOSE_MSG_WIN();
            FADE( 1, 0 );
            FADE_SYNC();
            call_nigth_dormitory();
            return;
        }

    }

}

void antique_shop()
{
    int var17;
    var17 = ( ( FUNCTION_000A( 499 ) + 100 ) / 100 );
    // bit id ((0) + (1024)) + (1569) = 2593
    // bit id (0) + (257) = 257
    
    if ( ( ( GET_MONTH() == 9 ) && ( GET_DAY_OF_MONTH() == 5 ) ) && ( FUNCTION_0083() == 8 ) )
    {
        OPEN_MSG_WIN();
        
        if ( var17 == 1 )
        {
            MSG( SHOP_STOP_YUKARI );
        }
        else if ( var17 == 2 )
        {
            MSG( SHOP_STOP_AEGIS );
        }
        else if ( var17 == 3 )
        {
            MSG( SHOP_STOP_SANADA );
        }
        else if ( var17 == 4 )
        {
            MSG( SHOP_STOP_ARAGAKI );
        }
        else 
        {
            MSG( SHOP_STOP_AMADA );
        }

        CLOSE_MSG_WIN();
    }
    else if ( CHECK_TIME_SPAN( 3, 1, 3, 5 ) == 1 )
    {
        OPEN_MSG_WIN();
        MSG( STOP_INTO_SHOP );
        CLOSE_MSG_WIN();
    }
    else if ( BIT_CHK( ( ( 0 + 0x0400 ) + 1569 ) ) == 0 )
    {
        OPEN_MSG_WIN();
        MSG( KOTTOU_NG );
        
        if ( ( ( GET_MONTH() == 4 ) && ( GET_DAY_OF_MONTH() == 21 ) ) && ( BIT_CHK( ( 0 + 257 ) ) == 0 ) )
        {
            MSG( JUNPEI_COMMENT_ANTIQUE );
        }

        CLOSE_MSG_WIN();
    }
    else 
    {
        comu_antique_shop();
    }

}

void comu_antique_shop()
{
    CALL_SFX( 2, 8 );
    FLD_FUNCTION_0089( 10250, 0, 0, 0, 1 );
    FADE( 2, 0 );
    FADE_SYNC();
    // bit id (((((0) + (1024)) + (2048)) + (1024)) + (1024)) + (7) = 5127
    BIT_ON( ( ( ( ( ( 0 + 0x0400 ) + 0x0800 ) + 0x0400 ) + 0x0400 ) + 7 ) );
    CALL_FCL( 4 );
    FUNCTION_002B();
    // bit id (((((0) + (1024)) + (2048)) + (1024)) + (1024)) + (7) = 5127
    BIT_OFF( ( ( ( ( ( 0 + 0x0400 ) + 0x0800 ) + 0x0400 ) + 0x0400 ) + 7 ) );
    CALL_FIELD( 8, 1, 9, 0 );
}

void ufo_catcher()
{
    // bit id (0) + (257) = 257
    
    if ( ( ( GET_MONTH() == 9 ) && ( GET_DAY_OF_MONTH() == 5 ) ) && ( FUNCTION_0083() == 8 ) )
    {
        OPEN_MSG_WIN();
        MSG( STOP_UFO_CATCHER );
        CLOSE_MSG_WIN();
    }
    else if ( ( ( GET_MONTH() == 4 ) && ( GET_DAY_OF_MONTH() == 21 ) ) && ( BIT_CHK( ( 0 + 257 ) ) == 0 ) )
    {
        OPEN_MSG_WIN();
        MSG( JUNPEI_STOP_GAME );
        CLOSE_MSG_WIN();
    }
    else 
    {
        comu_ufo_catcher();
    }

}

void comu_ufo_catcher()
{
    int var29;
    OPEN_MSG_WIN();
    
    if ( GET_DAY_OF_WEEK() <= 4 )
    {
        MSG( UFO_CATHER_02 );
    }
    else 
    {
        MSG( UFO_CATHER );
    }

    SEL_CHK_PAD( 6, 1 );
    
    if ( SEL( YESNO_SEL ) == 0 )
    {
        
        if ( GET_YEN() < 200 )
        {
            MSG( MONEY_TARINAI );
            CLOSE_MSG_WIN();
            return;
        }
        else 
        {
            CLOSE_MSG_WIN();
            REMOVE_YEN( 200 );
            FADE( 5, 10 );
            FADE_SYNC();
            FUNCTION_019E( 0, 0, 524 );
            OPEN_MSG_WIN();
            MSG( UFO_CATHER_CONTINUE );
            CLOSE_MSG_WIN();
            FUNCTION_000D( 0 );
            FADE_SYNC();
            var29 = FUNCTION_000A( 9 );
            
            if ( var29 == 0 )
            {
                OPEN_MSG_WIN();
                
                if ( GET_DAY_OF_WEEK() <= 4 )
                {
                    MSG( UFO_CATHER_GET_02 );
                }
                else 
                {
                    MSG( UFO_CATHER_GET );
                }

            }
            else 
            {
                OPEN_MSG_WIN();
                MSG( UFO_CATHER_NG );
            }

            CLOSE_MSG_WIN();
        }

    }

}

void game_center()
{
    int var20;
    var20 = ( ( FUNCTION_000A( 499 ) + 100 ) / 100 );
    // bit id (0) + (257) = 257
    
    if ( ( ( GET_MONTH() == 9 ) && ( GET_DAY_OF_MONTH() == 5 ) ) && ( FUNCTION_0083() == 8 ) )
    {
        OPEN_MSG_WIN();
        
        if ( var20 == 1 )
        {
            MSG( SHOP_STOP_YUKARI );
        }
        else if ( var20 == 2 )
        {
            MSG( SHOP_STOP_AEGIS );
        }
        else if ( var20 == 3 )
        {
            MSG( SHOP_STOP_SANADA );
        }
        else if ( var20 == 4 )
        {
            MSG( SHOP_STOP_ARAGAKI );
        }
        else 
        {
            MSG( SHOP_STOP_AMADA );
        }

        CLOSE_MSG_WIN();
    }
    else if ( ( ( GET_MONTH() == 4 ) && ( GET_DAY_OF_MONTH() == 21 ) ) && ( BIT_CHK( ( 0 + 257 ) ) == 0 ) )
    {
        OPEN_MSG_WIN();
        MSG( JUNPEI_STOP_GAME );
        CLOSE_MSG_WIN();
        return;
    }
    else 
    {
        comu_game_center();
    }

}

void comu_game_center()
{
    int var27;
    int var28;
    
    if ( ( ( GET_MONTH() == 1 ) && ( GET_DAY_OF_MONTH() == 31 ) ) && ( FUNCTION_0083() == 6 ) )
    {
        OPEN_MSG_WIN();
        MSG( GAMEC_SETUMEI );
        CLOSE_MSG_WIN();
        return;
    }

    OPEN_MSG_WIN();
    MSG( GAMEC_SETUMEI );
    // bit id ((0) + (1024)) + (1568) = 2592
    // bit id ((0) + (1024)) + (1568) = 2592
    
    if ( BIT_CHK( ( ( 0 + 0x0400 ) + 1568 ) ) == 0 )
    {
        CLOSE_MSG_WIN();
        MSG_HELP( JIKANTUBUSI_TUTO );
        BIT_ON( ( ( 0 + 0x0400 ) + 1568 ) );
        OPEN_MSG_WIN();
    }

    
    if ( FUNCTION_0083() == 6 )
    {
        MSG( HAIRU_SINYA );
    }
    else 
    {
        MSG( HAIRU_YORU );
    }

    SEL_CHK_PAD( 6, 1 );
    
    if ( SEL( YESNO_SEL ) == 0 )
    {
        MSG( GAMEC_CHOICE );
        
        if ( ( GET_DAY_OF_WEEK() == 1 ) || ( GET_DAY_OF_WEEK() == 4 ) )
        {
            SEL_CHK_PAD( 6, 2 );
            var27 = SEL( GAMEC_CHOICE_SEL01 );
            
            if ( var27 == 0 )
            {
                var28 = 1;
            }
            else if ( var27 == 1 )
            {
                var28 = 4;
            }
            else 
            {
                CLOSE_MSG_WIN();
                return;
            }

        }
        else if ( ( GET_DAY_OF_WEEK() == 2 ) || ( GET_DAY_OF_WEEK() == 5 ) )
        {
            SEL_CHK_PAD( 6, 2 );
            var27 = SEL( GAMEC_CHOICE_SEL02 );
            
            if ( var27 == 0 )
            {
                var28 = 2;
            }
            else if ( var27 == 1 )
            {
                var28 = 5;
            }
            else 
            {
                CLOSE_MSG_WIN();
                return;
            }

        }
        else if ( ( GET_DAY_OF_WEEK() == 3 ) || ( GET_DAY_OF_WEEK() == 6 ) )
        {
            SEL_CHK_PAD( 6, 2 );
            var27 = SEL( GAMEC_CHOICE_SEL03 );
            
            if ( var27 == 0 )
            {
                var28 = 3;
            }
            else if ( var27 == 1 )
            {
                var28 = 6;
            }
            else 
            {
                CLOSE_MSG_WIN();
                return;
            }

        }
        else 
        {
            SEL_CHK_PAD( 6, 3 );
            var27 = SEL( GAMEC_CHOICE_SEL04 );
            
            if ( var27 == 0 )
            {
                var28 = 4;
            }
            else if ( var27 == 1 )
            {
                var28 = 5;
            }
            else if ( var27 == 2 )
            {
                var28 = 6;
            }
            else 
            {
                CLOSE_MSG_WIN();
                return;
            }

        }

        
        if ( var28 == 1 )
        {
            
            if ( GET_YEN() < 1500 )
            {
                MSG( MONEY_TARINAI );
                CLOSE_MSG_WIN();
                return;
            }
            else 
            {
                REMOVE_YEN( 1500 );
                GAME_01();
            }

        }
        else if ( var28 == 2 )
        {
            
            if ( GET_YEN() < 3000 )
            {
                MSG( MONEY_TARINAI );
                CLOSE_MSG_WIN();
                return;
            }
            else 
            {
                REMOVE_YEN( 3000 );
                GAME_02();
            }

        }
        else if ( var28 == 3 )
        {
            
            if ( GET_YEN() < 3000 )
            {
                MSG( MONEY_TARINAI );
                CLOSE_MSG_WIN();
                return;
            }
            else 
            {
                REMOVE_YEN( 3000 );
                GAME_03();
            }

        }
        else if ( var28 == 4 )
        {
            
            if ( GET_YEN() < 2000 )
            {
                MSG( MONEY_TARINAI );
                CLOSE_MSG_WIN();
                return;
            }
            else 
            {
                REMOVE_YEN( 2000 );
                GAME_04();
            }

        }
        else if ( var28 == 5 )
        {
            
            if ( GET_YEN() < 2000 )
            {
                MSG( MONEY_TARINAI );
                CLOSE_MSG_WIN();
                return;
            }
            else 
            {
                REMOVE_YEN( 2000 );
                GAME_05();
            }

        }
        else if ( var28 == 6 )
        {
            
            if ( GET_YEN() < 2000 )
            {
                MSG( MONEY_TARINAI );
                CLOSE_MSG_WIN();
                return;
            }
            else 
            {
                REMOVE_YEN( 2000 );
                GAME_06();
            }

        }

    }

}

void GAME_01()
{
    CLOSE_MSG_WIN();
    FADE( 2, 0 );
    FADE_SYNC();
    FLD_FUNCTION_0138( FUNCTION_0137( 0 ), 12 );
    FUNCTION_000C( 10 );
    OPEN_MSG_WIN();
    MSG( KARAOKE_CONTINUE );
    CLOSE_MSG_WIN();
    FUNCTION_000D( 0 );
    FADE_SYNC();
    OPEN_MSG_WIN();
    MSG( GAMEC_END_06 );
    
    if ( GET_SOCIAL_RANK( 1, 1 ) == 6 )
    {
        MSG( PARAM_MAX_SUMI );
    }
    else 
    {
        FUNCTION_00B9( 0, 21 );
        CALL_SFX( 4, 3 );
        MSG( MIRYOKU_UP );
        
        if ( CHANGE_SOCIAL_STAT( 1, 4 ) == 1 )
        {
            MSG( PARAM_RANK_UP_MIRYOKU );
        }

    }

    
    if ( FUNCTION_0083() == 6 )
    {
        MSG( RYOU_KAERU_SINYA );
    }
    else 
    {
        MSG( RYOU_KAERU );
    }

    CLOSE_MSG_WIN();
    FADE( 1, 0 );
    FADE_SYNC();
    call_nigth_dormitory();
}

void GAME_02()
{
    CLOSE_MSG_WIN();
    FADE( 2, 0 );
    FADE_SYNC();
    FLD_FUNCTION_0138( FUNCTION_0137( 0 ), 12 );
    FUNCTION_000C( 10 );
    OPEN_MSG_WIN();
    MSG( KARAOKE_CONTINUE );
    CLOSE_MSG_WIN();
    FUNCTION_000D( 0 );
    FADE_SYNC();
    OPEN_MSG_WIN();
    MSG( GAMEC_END_05 );
    
    if ( GET_SOCIAL_RANK( 1, 2 ) == 6 )
    {
        MSG( PARAM_MAX_SUMI );
    }
    else 
    {
        FUNCTION_00B9( 0, 21 );
        CALL_SFX( 4, 3 );
        MSG( YUUKI_UP );
        
        if ( CHANGE_SOCIAL_STAT( 2, 4 ) == 1 )
        {
            MSG( PARAM_RANK_UP_YUUKI );
        }

    }

    
    if ( FUNCTION_0083() == 6 )
    {
        MSG( RYOU_KAERU_SINYA );
    }
    else 
    {
        MSG( RYOU_KAERU );
    }

    CLOSE_MSG_WIN();
    FADE( 1, 0 );
    FADE_SYNC();
    call_nigth_dormitory();
}

void GAME_03()
{
    CLOSE_MSG_WIN();
    FADE( 2, 0 );
    FADE_SYNC();
    FLD_FUNCTION_0138( FUNCTION_0137( 0 ), 12 );
    FUNCTION_000C( 10 );
    OPEN_MSG_WIN();
    MSG( KARAOKE_CONTINUE );
    CLOSE_MSG_WIN();
    FUNCTION_000D( 0 );
    FADE_SYNC();
    OPEN_MSG_WIN();
    MSG( GAMEC_END_01 );
    
    if ( GET_SOCIAL_RANK( 1, 0 ) == 6 )
    {
        MSG( PARAM_MAX_SUMI );
    }
    else 
    {
        FUNCTION_00B9( 0, 21 );
        CALL_SFX( 4, 3 );
        MSG( GAKURYOKU_UP );
        
        if ( CHANGE_SOCIAL_STAT( 0, 4 ) == 1 )
        {
            MSG( PARAM_RANK_UP_GAKURYOKU );
        }

    }

    
    if ( FUNCTION_0083() == 6 )
    {
        MSG( RYOU_KAERU_SINYA );
    }
    else 
    {
        MSG( RYOU_KAERU );
    }

    CLOSE_MSG_WIN();
    FADE( 1, 0 );
    FADE_SYNC();
    call_nigth_dormitory();
}

void GAME_04()
{
    CLOSE_MSG_WIN();
    FADE( 2, 0 );
    FADE_SYNC();
    FLD_FUNCTION_0138( FUNCTION_0137( 0 ), 12 );
    FUNCTION_000C( 10 );
    OPEN_MSG_WIN();
    MSG( KARAOKE_CONTINUE );
    CLOSE_MSG_WIN();
    FUNCTION_000D( 0 );
    FADE_SYNC();
    OPEN_MSG_WIN();
    MSG( GAMEC_END_02 );
    
    if ( COMU_FUNCTION_01EF( 0 ) == 99 )
    {
        MSG( PARAM_MAX_SUMI );
    }
    else 
    {
        FUNCTION_00B9( 0, 21 );
        CALL_SFX( 4, 3 );
        MSG( TIKARA_UP );
        CHANGE_PERSONA_STAT( 0, 3 );
    }

    
    if ( FUNCTION_0083() == 6 )
    {
        MSG( RYOU_KAERU_SINYA );
    }
    else 
    {
        MSG( RYOU_KAERU );
    }

    CLOSE_MSG_WIN();
    FADE( 1, 0 );
    FADE_SYNC();
    call_nigth_dormitory();
}

void GAME_05()
{
    CLOSE_MSG_WIN();
    FADE( 2, 0 );
    FADE_SYNC();
    FLD_FUNCTION_0138( FUNCTION_0137( 0 ), 12 );
    FUNCTION_000C( 10 );
    OPEN_MSG_WIN();
    MSG( KARAOKE_CONTINUE );
    CLOSE_MSG_WIN();
    FUNCTION_000D( 0 );
    FADE_SYNC();
    OPEN_MSG_WIN();
    MSG( GAMEC_END_03 );
    
    if ( COMU_FUNCTION_01EF( 3 ) == 99 )
    {
        MSG( PARAM_MAX_SUMI );
    }
    else 
    {
        FUNCTION_00B9( 0, 21 );
        CALL_SFX( 4, 3 );
        MSG( SOKU_UP );
        CHANGE_PERSONA_STAT( 3, 3 );
    }

    
    if ( FUNCTION_0083() == 6 )
    {
        MSG( RYOU_KAERU_SINYA );
    }
    else 
    {
        MSG( RYOU_KAERU );
    }

    CLOSE_MSG_WIN();
    FADE( 1, 0 );
    FADE_SYNC();
    call_nigth_dormitory();
}

void GAME_06()
{
    CLOSE_MSG_WIN();
    FADE( 2, 0 );
    FADE_SYNC();
    FLD_FUNCTION_0138( FUNCTION_0137( 0 ), 12 );
    FUNCTION_000C( 10 );
    OPEN_MSG_WIN();
    MSG( KARAOKE_CONTINUE );
    CLOSE_MSG_WIN();
    FUNCTION_000D( 0 );
    FADE_SYNC();
    OPEN_MSG_WIN();
    MSG( GAMEC_END_04 );
    
    if ( COMU_FUNCTION_01EF( 1 ) == 99 )
    {
        MSG( PARAM_MAX_SUMI );
    }
    else 
    {
        FUNCTION_00B9( 0, 21 );
        CALL_SFX( 4, 3 );
        MSG( MARYOKU_UP );
        CHANGE_PERSONA_STAT( 1, 3 );
    }

    
    if ( FUNCTION_0083() == 6 )
    {
        MSG( RYOU_KAERU_SINYA );
    }
    else 
    {
        MSG( RYOU_KAERU );
    }

    CLOSE_MSG_WIN();
    FADE( 1, 0 );
    FADE_SYNC();
    call_nigth_dormitory();
}

void SchoolEntrance()
{
    // bit id (((0) + (1024)) + (2048)) + (608) = 3680
    // bit id (0) + (8) = 8
    
    if ( BIT_CHK( ( ( ( 0 + 0x0400 ) + 0x0800 ) + 608 ) ) == 1 )
    {
        OPEN_MSG_WIN();
        MSG( STOP_EXIT );
        CLOSE_MSG_WIN();
    }
    else if ( ( GET_MONTH() == 4 ) && ( GET_DAY_OF_MONTH() == 7 ) )
    {
        OPEN_MSG_WIN();
        MSG( GOTO_TEACHERS_ROOM );
        CLOSE_MSG_WIN();
    }
    else 
    {
        CALL_SFX( 2, 7 );
        FLD_FUNCTION_0089( 10242, 0, 0, 0, 1 );
        FADE( 2, 0 );
        FADE_SYNC();
        
        if ( ( ( GET_MONTH() == 4 ) && ( GET_DAY_OF_MONTH() == 21 ) ) && ( BIT_CHK( ( 0 + 8 ) ) == 0 ) )
        {
            call_sanada_event();
            return;
        }
        else 
        {
            CALL_FIELD( 6, 2, 3, 0 );
            return;
        }

    }

}

void SchoolLobby()
{
    // bit id (((0) + (1024)) + (2048)) + (47) = 3119
    
    if ( BIT_CHK( ( ( ( 0 + 0x0400 ) + 0x0800 ) + 47 ) ) == 1 )
    {
        OPEN_MSG_WIN();
        MSG( STOP_INTO_SCHOOL );
        CLOSE_MSG_WIN();
    }
    else 
    {
        CALL_SFX( 2, 7 );
        FLD_FUNCTION_0089( 10242, 0, 0, 0, 1 );
        FADE( 2, 0 );
        FADE_SYNC();
        CALL_FIELD( 6, 1, 1, 0 );
        return;
    }

}

void SchoolLeftHall()
{
    FADE( 2, 0 );
    FADE_SYNC();
    CALL_FIELD( 6, 7, 0, 0 );
}

void SchoolSecondHall()
{
    // bit id (((0) + (1024)) + (2048)) + (608) = 3680
    
    if ( BIT_CHK( ( ( ( 0 + 0x0400 ) + 0x0800 ) + 608 ) ) == 1 )
    {
        OPEN_MSG_WIN();
        MSG( STOP_UPSTAIR );
        CLOSE_MSG_WIN();
        FADE( 5, 10 );
        FADE_SYNC();
        FLD_FUNCTION_0138( FUNCTION_0137( 0 ), 9 );
        FLD_FUNCTION_0138( FUNCTION_0137( 1 ), 11 );
        FUNCTION_01E6();
        FUNCTION_000C( 5 );
        FUNCTION_000D( 0 );
        FADE_SYNC();
    }
    else if ( ( GET_MONTH() == 4 ) && ( GET_DAY_OF_MONTH() == 7 ) )
    {
        OPEN_MSG_WIN();
        MSG( GOTO_TEACHERS_ROOM );
        CLOSE_MSG_WIN();
        FADE( 5, 10 );
        FADE_SYNC();
        FLD_FUNCTION_0138( FUNCTION_0137( 0 ), 9 );
        FUNCTION_000C( 5 );
        FUNCTION_000D( 0 );
        FADE_SYNC();
    }
    else 
    {
        FADE( 2, 0 );
        FADE_SYNC();
        CALL_SFX( 2, 0 );
        CALL_FIELD( 6, 4, 3, 0 );
        return;
    }

}

void SchoolRightHall()
{
    // bit id (((0) + (1024)) + (2048)) + (608) = 3680
    
    if ( BIT_CHK( ( ( ( 0 + 0x0400 ) + 0x0800 ) + 608 ) ) == 1 )
    {
        OPEN_MSG_WIN();
        MSG( STOP_TO_ROUNDABOUT_WAY );
        MSG( STOP_ENTRANCE );
        CLOSE_MSG_WIN();
        FADE( 5, 10 );
        FADE_SYNC();
        FLD_FUNCTION_0138( FUNCTION_0137( 0 ), 8 );
        FLD_FUNCTION_0138( FUNCTION_0137( 1 ), 10 );
        FUNCTION_01E6();
        FUNCTION_000C( 5 );
        FUNCTION_000D( 0 );
        FADE_SYNC();
    }
    else if ( ( GET_MONTH() == 4 ) && ( GET_DAY_OF_MONTH() == 7 ) )
    {
        OPEN_MSG_WIN();
        MSG( GOTO_TEACHERS_ROOM );
        CLOSE_MSG_WIN();
        FADE( 5, 10 );
        FADE_SYNC();
        FLD_FUNCTION_0138( FUNCTION_0137( 0 ), 8 );
        FUNCTION_000C( 5 );
        FUNCTION_000D( 0 );
        FADE_SYNC();
    }
    else 
    {
        FADE( 2, 0 );
        FADE_SYNC();
        CALL_FIELD( 6, 11, 2, 0 );
        return;
    }

}

void SchoolSportsHall()
{
	// bit id (((0) + (1024)) + (2048)) + (608) = 3680
    
    if ( BIT_CHK( ( ( ( 0 + 0x0400 ) + 0x0800 ) + 608 ) ) == 1 )
    {
        OPEN_MSG_WIN();
        MSG( STOP_TO_ROUNDABOUT_WAY );
        MSG( STOP_ENTRANCE );
        CLOSE_MSG_WIN();
        FADE( 5, 10 );
        FADE_SYNC();
        FLD_FUNCTION_0138( FUNCTION_0137( 0 ), 8 );
        FLD_FUNCTION_0138( FUNCTION_0137( 1 ), 10 );
        FUNCTION_01E6();
        FUNCTION_000C( 5 );
        FUNCTION_000D( 0 );
        FADE_SYNC();
    }
    else if ( ( GET_MONTH() == 4 ) && ( GET_DAY_OF_MONTH() == 7 ) )
    {
        OPEN_MSG_WIN();
        MSG( GOTO_TEACHERS_ROOM );
        CLOSE_MSG_WIN();
        FADE( 5, 10 );
        FADE_SYNC();
        FLD_FUNCTION_0138( FUNCTION_0137( 0 ), 8 );
        FUNCTION_000C( 5 );
        FUNCTION_000D( 0 );
        FADE_SYNC();
    }
    else 
    {
        CALL_SFX( 2, 7 );
		FADE( 2, 0 );
		FADE_SYNC();
		CALL_FIELD( 6, 20, 0, 0 );
        return;
    }
}

void SchoolHomeroom()
{
    if ( BIT_CHK( ( ( ( 0 + 0x0400 ) + 0x0800 ) + 608 ) ) == 1 )
    {
        OPEN_MSG_WIN();
        MSG( STOP_TO_ROUNDABOUT_WAY );
        MSG( STOP_ENTRANCE );
        CLOSE_MSG_WIN();
        FADE( 5, 10 );
        FADE_SYNC();
        FLD_FUNCTION_0138( FUNCTION_0137( 0 ), 8 );
        FLD_FUNCTION_0138( FUNCTION_0137( 1 ), 10 );
        FUNCTION_01E6();
        FUNCTION_000C( 5 );
        FUNCTION_000D( 0 );
        FADE_SYNC();
    }
    else if ( ( GET_MONTH() == 4 ) && ( GET_DAY_OF_MONTH() == 7 ) )
    {
        OPEN_MSG_WIN();
        MSG( GOTO_TEACHERS_ROOM );
        CLOSE_MSG_WIN();
        FADE( 5, 10 );
        FADE_SYNC();
        FLD_FUNCTION_0138( FUNCTION_0137( 0 ), 8 );
        FUNCTION_000C( 5 );
        FUNCTION_000D( 0 );
        FADE_SYNC();
    }
    else 
    {
        // bit id (((0) + (1024)) + (2048)) + (17) = 3089
		BIT_OFF( ( ( ( 0 + 0x0400 ) + 0x0800 ) + 17 ) );
		CALL_SFX( 2, 6 );
		FLD_FUNCTION_0089( 10241, 0, 0, 0, 1 );
		FADE( 2, 0 );
		FADE_SYNC();
		CALL_FIELD( 6, 3, 1, 0 );
    }

}
	

void SchoolRooftop()
{
    // bit id (((0) + (1024)) + (2048)) + (608) = 3680
    if ( BIT_CHK( ( ( ( 0 + 0x0400 ) + 0x0800 ) + 608 ) ) == 1 )
    {
        OPEN_MSG_WIN();
        MSG( STOP_TO_ROUNDABOUT_WAY );
        MSG( STOP_ENTRANCE );
        CLOSE_MSG_WIN();
        FADE( 5, 10 );
        FADE_SYNC();
        FLD_FUNCTION_0138( FUNCTION_0137( 0 ), 8 );
        FLD_FUNCTION_0138( FUNCTION_0137( 1 ), 10 );
        FUNCTION_01E6();
        FUNCTION_000C( 5 );
        FUNCTION_000D( 0 );
        FADE_SYNC();
    }
    else if ( ( GET_MONTH() == 4 ) && ( GET_DAY_OF_MONTH() == 7 ) )
    {
        OPEN_MSG_WIN();
        MSG( GOTO_TEACHERS_ROOM );
        CLOSE_MSG_WIN();
        FADE( 5, 10 );
        FADE_SYNC();
        FLD_FUNCTION_0138( FUNCTION_0137( 0 ), 8 );
        FUNCTION_000C( 5 );
        FUNCTION_000D( 0 );
        FADE_SYNC();
    }
    else if ( BIT_CHK( ( ( ( 0 + 0x0400 ) + 0x0800 ) + 608 ) ) == 1 )
    {
        OPEN_MSG_WIN();
        MSG( STOP_TO_ROOFTOP );
        CLOSE_MSG_WIN();
        FADE( 5, 10 );
        FADE_SYNC();
        FLD_FUNCTION_0138( FUNCTION_0137( 0 ), 13 );
        FLD_FUNCTION_0138( FUNCTION_0137( 1 ), 14 );
        FUNCTION_01E6();
        FUNCTION_000C( 5 );
        FUNCTION_000D( 0 );
        FADE_SYNC();
    }
    else 
    {
        FADE( 2, 0 );
        FADE_SYNC();
        CALL_SFX( 2, 0 );
        CALL_FIELD( 6, 5, 0, 0 );
        return;
    }

}

void SchoolMap()
{
    // bit id (((0) + (1024)) + (2048)) + (608) = 3680
    // bit id (0) + (8) = 8
    
    if ( BIT_CHK( ( ( ( 0 + 0x0400 ) + 0x0800 ) + 608 ) ) == 1 )
    {
        OPEN_MSG_WIN();
        MSG( STOP_EXIT );
        CLOSE_MSG_WIN();
    }
    else if ( ( GET_MONTH() == 4 ) && ( GET_DAY_OF_MONTH() == 7 ) )
    {
        OPEN_MSG_WIN();
        MSG( GOTO_TEACHERS_ROOM );
        CLOSE_MSG_WIN();
    }
    else 
    {
        FLD_FUNCTION_0089( 10241, 0, 0, 0, 1 );
        FADE( 2, 0 );
        FADE_SYNC();
        
        if ( ( ( GET_MONTH() == 4 ) && ( GET_DAY_OF_MONTH() == 21 ) ) && ( BIT_CHK( ( 0 + 8 ) ) == 0 ) )
        {
            call_sanada_event();
            return;
        }
        else 
        {
            CALL_MAP( 1 );
            return;
        }

    }

}

void call_sanada_event()
{
    // bit id (0) + (8) = 8
    BIT_ON( ( 0 + 8 ) );
    // bit id (((0) + (1024)) + (2048)) + (47) = 3119
    BIT_ON( ( ( ( 0 + 0x0400 ) + 0x0800 ) + 47 ) );
    ADD_MEMBER( 0, PartyMember.Junpei );
    CALL_EVENT( 116, 1, 0 );
    CALL_FIELD( 6, 2, 5, 0 );
}

void MyRoom()
{
    // bit id (((0) + (1024)) + (2048)) + (512) = 3584
    // bit id (((0) + (1024)) + (2048)) + (520) = 3592
    // bit id (((0) + (1024)) + (2048)) + (14) = 3086
    // bit id (((0) + (1024)) + (2048)) + (14) = 3086
    // bit id ((0) + (1024)) + (2021) = 3045
    // bit id ((0) + (1024)) + (1538) = 2562
    
    if ( BIT_CHK( ( ( ( 0 + 0x0400 ) + 0x0800 ) + 0x0200 ) ) == 1 )
    {
        OPEN_MSG_WIN();
        MSG( ROOM_STOP_01 );
        CLOSE_MSG_WIN();
    }
    else if ( FUNCTION_0083() == 6 )
    {
        
        if ( BIT_CHK( ( ( ( 0 + 0x0400 ) + 0x0800 ) + 520 ) ) == 1 )
        {
            OPEN_MSG_WIN();
            MSG( STOP_INTO_MYROOM );
            CLOSE_MSG_WIN();
            return;
        }
        else if ( ( GET_MONTH() == 1 ) && ( GET_DAY_OF_MONTH() == 31 ) )
        {
            OPEN_MSG_WIN();
            MSG( STOP_INTO_MYROOM_LAST_DA );
            CLOSE_MSG_WIN();
            return;
        }
        else if ( ( ( GET_MONTH() == 4 ) && ( GET_DAY_OF_MONTH() == 7 ) ) || ( BIT_CHK( ( ( ( 0 + 0x0400 ) + 0x0800 ) + 14 ) ) == 0 ) )
        {
            
            if ( ( CHECK_TIME_SPAN( 4, 21, 1, 31 ) == 1 ) && ( BIT_CHK( ( ( ( 0 + 0x0400 ) + 0x0800 ) + 14 ) ) == 0 ) )
            {
                OPEN_MSG_WIN();
                MSG( GOINTO_MYROOM );
                CLOSE_MSG_WIN();
                MSG_HELP( HELP_GOINTO_MYROOM );
            }

            OPEN_MSG_WIN();
            MSG( GOINTO_MYROOM_OK );
            SEL_CHK_PAD( 6, 1 );
            
            if ( SEL( INTO_ROOM_SEL ) != 0 )
            {
                CLOSE_MSG_WIN();
                return;
            }

            CLOSE_MSG_WIN();
        }

        
        if ( ( BIT_CHK( ( ( 0 + 0x0400 ) + 2021 ) ) == 0 ) && ( ( CHECK_TIME_SPAN( 4, 7, 4, 20 ) == 1 ) || ( CHECK_TIME_SPAN( 3, 1, 3, 5 ) == 1 ) ) )
        {
            OPEN_MSG_WIN();
			MSG( RoomMsg );
			SEL_CHK_PAD(6,20);
			int select = SEL( Room );
			CLOSE_MSG_WIN();
			switch (select)
			{
				case 0: // Yes
					BIT_ON( ( ( 0 + 0x0400 ) + 1538 ) );
					OPEN_MSG_WIN();
					
					if ( CHECK_TIME_SPAN( 4, 7, 4, 20 ) == 1 )
					{
						MSG( GOINTO_MYROOM_SLEEP );
					}
					else if ( CHECK_TIME_SPAN( 3, 1, 3, 5 ) == 1 )
					{
						MSG( GOINTO_MYROOM_LASTWEEK );
					}
					break;
				case 1: // No
					DormTravel();
					break;
				case 20:
					return;
			}
            CLOSE_MSG_WIN();
        }
		OPEN_MSG_WIN();
		MSG( RoomMsg );
		SEL_CHK_PAD(6,20);
		int select = SEL( Room );
		CLOSE_MSG_WIN();
		switch (select)
		{
			case 0: // Yes
				CALL_SFX( 2, 7 );
				FLD_FUNCTION_0089( 10241, 1, 0, 0, 1 );
				call_midnight_myroom();
				return;
				return;
			case 1: // No
				DormTravel();
				break;
			case 20:
				return;
		}
    }
    else 
    {
        CALL_SFX( 2, 7 );
        FLD_FUNCTION_0089( 10241, 1, 0, 0, 1 );
        FADE( 2, 0 );
        FADE_SYNC();
        CALL_FIELD( 7, 1, 0, 0 );
        return;
    }

}

void DormEntrance()
{
    // bit id (((0) + (1024)) + (2048)) + (22) = 3094
    // bit id (((0) + (1024)) + (2048)) + (22) = 3094
    
    if ( ( ( GET_MONTH() == 4 ) && ( GET_DAY_OF_MONTH() == 7 ) ) || ( ( GET_MONTH() == 4 ) && ( GET_DAY_OF_MONTH() == 9 ) ) )
    {
        OPEN_MSG_WIN();
        MSG( STOP_GO_OUT_MITSURU );
        CLOSE_MSG_WIN();
    }
    else if ( ( ( GET_MONTH() == 4 ) && ( GET_DAY_OF_MONTH() == 8 ) ) || ( ( ( FUNCTION_0083() == 6 ) && ( GET_MONTH() == 4 ) ) && ( GET_DAY_OF_MONTH() == 19 ) ) )
    {
        OPEN_MSG_WIN();
        MSG( STOP_GO_OUT_YUKARI );
        CLOSE_MSG_WIN();
    }
    else if ( ( ( FUNCTION_0083() == 4 ) && ( GET_MONTH() == 4 ) ) && ( GET_DAY_OF_MONTH() == 19 ) )
    {
        OPEN_MSG_WIN();
        MSG( STOP_GO_OUT_MITSURU_0419 );
        CLOSE_MSG_WIN();
    }
    else if ( ( GET_MONTH() == 4 ) && ( GET_DAY_OF_MONTH() == 18 ) )
    {
        OPEN_MSG_WIN();
        MSG( STOP_GO_OUT );
        CLOSE_MSG_WIN();
    }
    else if ( ( ( FUNCTION_0083() == 6 ) && ( GET_MONTH() == 9 ) ) && ( GET_DAY_OF_MONTH() == 18 ) )
    {
        OPEN_MSG_WIN();
        MSG( STORM_COMING );
        CLOSE_MSG_WIN();
        OPEN_MSG_WIN();
        MSG( STORM_COMING_JUNPEI );
        CLOSE_MSG_WIN();
    }
    else if ( FUNCTION_0083() == 4 )
    {
        
        if ( BIT_CHK( ( ( ( 0 + 0x0400 ) + 0x0800 ) + 22 ) ) == 0 )
        {
            MSG_HELP( GO_OUT_OK_HELP );
            OPEN_MSG_WIN();
            MSG( GO_OUT_OK );
            SEL_CHK_PAD( 6, 1 );
            
            if ( SEL( GOOUT_SEL ) == 1 )
            {
                CLOSE_MSG_WIN();
                return;
            }
			else
			{
				CALL_SFX( 2, 7 );
				FLD_FUNCTION_0089( 10241, 0, 0, 0, 1 );
				FADE( 2, 0 );
				FADE_SYNC();
				CALL_FIELD( 7, 9, 0, 0 );
				return;
			}
		}
		else
		{
			CALL_SFX( 2, 7 );
			FLD_FUNCTION_0089( 10241, 0, 0, 0, 1 );
			FADE( 2, 0 );
			FADE_SYNC();
			CALL_FIELD( 7, 9, 0, 0 );
			return;
		}
    }
	else
	{
		CALL_SFX( 2, 7 );
		FLD_FUNCTION_0089( 10241, 0, 0, 0, 1 );
		FADE( 2, 0 );
		FADE_SYNC();
		CALL_FIELD( 7, 9, 0, 0 );
		return;
	}
}

void DormLobby()
{
    if (GET_FIELD_MINOR() == 9)
	{
		int var14;
		var14 = 0;
		// bit id (0) + (257) = 257
		// bit id (((0) + (1024)) + (2048)) + (13) = 3085
		// bit id (((0) + (1024)) + (2048)) + (13) = 3085
		
		if ( ( ( GET_MONTH() == 4 ) && ( GET_DAY_OF_MONTH() == 21 ) ) && ( BIT_CHK( ( 0 + 257 ) ) == 0 ) )
		{
			OPEN_MSG_WIN();
			MSG( SANADA_CALLING );
			CLOSE_MSG_WIN();
			return;
		}
		else if ( ( FUNCTION_0083() == 4 ) || ( FUNCTION_0083() == 5 ) )
		{
			var14 = 1;
			
			if ( ( CHECK_TIME_SPAN( 4, 21, 1, 31 ) == 1 ) && ( BIT_CHK( ( ( ( 0 + 0x0400 ) + 0x0800 ) + 13 ) ) == 0 ) )
			{
				OPEN_MSG_WIN();
				MSG( GOINTO_HOME );
				CLOSE_MSG_WIN();
				MSG_HELP( HELP_GOINTO_HOME );
				OPEN_MSG_WIN();
				MSG( GOINTO_HOME_OK );
				SEL_CHK_PAD( 6, 1 );
				
				if ( SEL( INTO_HOME_SEL ) != 0 )
				{
					CLOSE_MSG_WIN();
					return;
				}

				CLOSE_MSG_WIN();
				BIT_ON( ( ( ( 0 + 0x0400 ) + 0x0800 ) + 13 ) );
			}

		}
		
		if ( var14 == 1 )
		{
			OPEN_MSG_WIN();
			MSG( DormLobbyMsg );
			SEL_CHK_PAD(6,20);
			int select = SEL( DormLobby );
			CLOSE_MSG_WIN();
			switch (select)
			{
				case 0: // Yes
					CALL_SFX( 2, 7 );
					FLD_FUNCTION_0089( 10241, 1, 0, 0, 1 );
		
					if ( FUNCTION_0083() == 6 )
					{
						FLD_FUNCTION_0089( 10342, 1, 0, 0, 1 );
					}
					FADE( 1, 0 );
					FADE_SYNC();
					call_nigth_dormitory();
					break;
				case 1: // No
					return;
				case 20:
					return;
			}
			
		}
		else 
		{
			CALL_SFX( 2, 7 );
			FLD_FUNCTION_0089( 10241, 1, 0, 0, 1 );
			
			if ( FUNCTION_0083() == 6 )
			{
				FLD_FUNCTION_0089( 10342, 1, 0, 0, 1 );
			}
			FADE( 2, 0 );
			FADE_SYNC();
			CALL_FIELD( 7, 2, 0, 0 );
		}

	}
	else
	{
	
		// bit id (((0) + (1024)) + (2048)) + (512) = 3584
		// bit id (((0) + (1024)) + (2048)) + (46) = 3118
		
		if ( BIT_CHK( ( ( ( 0 + 0x0400 ) + 0x0800 ) + 0x0200 ) ) == 1 )
		{
			OPEN_MSG_WIN();
			MSG( YUKARI_STOP_2F_DWNSTAIR );
			CLOSE_MSG_WIN();
			FADE( 5, 10 );
			FADE_SYNC();
			FLD_FUNCTION_0138( FUNCTION_0137( 0 ), 9 );
			FLD_FUNCTION_0138( FUNCTION_0137( 1 ), 10 );
			FUNCTION_01E6();
			FUNCTION_000C( 5 );
			FUNCTION_000D( 0 );
			FADE_SYNC();
		}
		else 
		{
			FADE( 2, 0 );
			FADE_SYNC();
			CALL_SFX( 2, 1 );
			BIT_ON( ( ( ( 0 + 0x0400 ) + 0x0800 ) + 46 ) );
			CALL_FIELD( 7, 2, 1, 0 );
			return;
		}
	}
}

void DormFloorTwo()
{
    if (GET_FIELD_MINOR() == 1)
	{
		if ( FUNCTION_0083() == 7 )
		{
			OPEN_MSG_WIN();
			MSG( OUTDOOR_MYROOM );
		}
		else 
		{
			CALL_SFX( 2, 7 );
			FLD_FUNCTION_0089( 10241, 0, 0, 0, 1 );
			FADE( 2, 0 );
			FADE_SYNC();
			CALL_FIELD( 7, 3, 0, 0 );
			return;
		}

		CLOSE_MSG_WIN();
	}
	else
	{
		// bit id (((0) + (1024)) + (2048)) + (512) = 3584
    
		if ( BIT_CHK( ( ( ( 0 + 0x0400 ) + 0x0800 ) + 0x0200 ) ) == 1 )
		{
			OPEN_MSG_WIN();
			MSG( YUKARI_STOP_UP );
			CLOSE_MSG_WIN();
			FADE( 5, 10 );
			FADE_SYNC();
			FLD_FUNCTION_0138( FUNCTION_0137( 0 ), 7 );
			FLD_FUNCTION_0138( FUNCTION_0137( 1 ), 8 );
			FUNCTION_01E6();
			FUNCTION_000C( 5 );
			FUNCTION_000D( 0 );
			FADE_SYNC();
		}
		else 
		{
			FADE( 2, 0 );
			FADE_SYNC();
			CALL_SFX( 2, 1 );
			CALL_FIELD( 7, 3, 2, 0 );
			return;
		}
	}
}

void DormFloorThree()
{
    FADE( 2, 0 );
    FADE_SYNC();
    CALL_SFX( 2, 1 );
    CALL_FIELD( 7, 4, 1, 0 );
}

void DormFloorFour()
{
    FADE( 2, 0 );
    FADE_SYNC();
    CALL_SFX( 2, 1 );
    // bit id (((0) + (1024)) + (2048)) + (512) = 3584
    // bit id (0) + (15) = 15
    // bit id (((0) + (1024)) + (2048)) + (520) = 3592
    
    if ( BIT_CHK( ( ( ( 0 + 0x0400 ) + 0x0800 ) + 0x0200 ) ) == 1 )
    {
        BIT_ON( ( 0 + 15 ) );
        CALL_EVENT( 123, 1, 0 );
        CALL_FIELD( 7, 7, 2, 0 );
        return;
    }
    else if ( BIT_CHK( ( ( ( 0 + 0x0400 ) + 0x0800 ) + 520 ) ) == 1 )
    {
        CALL_FIELD( 7, 5, 5, 0 );
        return;
    }
    else 
    {
        CALL_FIELD( 7, 5, 0, 0 );
        return;
    }

}

void DormFloorFive()
{
    FADE( 2, 0 );
    FADE_SYNC();
    CALL_SFX( 2, 1 );
    CALL_FIELD( 7, 7, 0, 0 );
}

void MeetingRoom()
{
    // bit id (0) + (21) = 21
    
    if ( ( CHECK_TIME_SPAN( 4, 21, 1, 31 ) == 1 ) && ( BIT_CHK( ( 0 + 21 ) ) == 1 ) )
    {
        CALL_SFX( 2, 7 );
        FLD_FUNCTION_0089( 10241, 1, 0, 0, 1 );
        FADE( 2, 0 );
        FADE_SYNC();
        CALL_FIELD( 7, 6, 0, 0 );
        return;
    }
    else 
    {
        OPEN_MSG_WIN();
        MSG( OPERATION_ROOM_STOP );
        CLOSE_MSG_WIN();
    }

}

void DormMap()
{
    // bit id (((0) + (1024)) + (2048)) + (22) = 3094
    // bit id (((0) + (1024)) + (2048)) + (22) = 3094
    
    if ( ( ( GET_MONTH() == 4 ) && ( GET_DAY_OF_MONTH() == 7 ) ) || ( ( GET_MONTH() == 4 ) && ( GET_DAY_OF_MONTH() == 9 ) ) )
    {
        OPEN_MSG_WIN();
        MSG( STOP_GO_OUT_MITSURU );
        CLOSE_MSG_WIN();
    }
    else if ( ( ( GET_MONTH() == 4 ) && ( GET_DAY_OF_MONTH() == 8 ) ) || ( ( ( FUNCTION_0083() == 6 ) && ( GET_MONTH() == 4 ) ) && ( GET_DAY_OF_MONTH() == 19 ) ) )
    {
        OPEN_MSG_WIN();
        MSG( STOP_GO_OUT_YUKARI );
        CLOSE_MSG_WIN();
    }
    else if ( ( ( FUNCTION_0083() == 4 ) && ( GET_MONTH() == 4 ) ) && ( GET_DAY_OF_MONTH() == 19 ) )
    {
        OPEN_MSG_WIN();
        MSG( STOP_GO_OUT_MITSURU_0419 );
        CLOSE_MSG_WIN();
    }
    else if ( ( GET_MONTH() == 4 ) && ( GET_DAY_OF_MONTH() == 18 ) )
    {
        OPEN_MSG_WIN();
        MSG( STOP_GO_OUT );
        CLOSE_MSG_WIN();
    }
    else if ( ( ( FUNCTION_0083() == 6 ) && ( GET_MONTH() == 9 ) ) && ( GET_DAY_OF_MONTH() == 18 ) )
    {
        OPEN_MSG_WIN();
        MSG( STORM_COMING );
        CLOSE_MSG_WIN();
        OPEN_MSG_WIN();
        MSG( STORM_COMING_JUNPEI );
        CLOSE_MSG_WIN();
    }
    else if ( FUNCTION_0083() == 4 )
    {
        
        if ( BIT_CHK( ( ( ( 0 + 0x0400 ) + 0x0800 ) + 22 ) ) == 0 )
        {
            MSG_HELP( GO_OUT_OK_HELP );
            OPEN_MSG_WIN();
            MSG( GO_OUT_OK );
            SEL_CHK_PAD( 6, 1 );
            
            if ( SEL( GOOUT_SEL ) == 1 )
            {
                CLOSE_MSG_WIN();
                return;
            }
			else
			{
				CALL_SFX( 2, 7 );
				FLD_FUNCTION_0089( 10241, 0, 0, 0, 1 );
				FADE( 2, 0 );
				FADE_SYNC();
				CALL_MAP( 5 );
				return;
			}
        }
		else
		{
			CALL_SFX( 2, 7 );
			FLD_FUNCTION_0089( 10241, 0, 0, 0, 1 );
			FADE( 2, 0 );
			FADE_SYNC();
			CALL_MAP( 5 );
			return;
		}

    }
	else
	{
		CALL_SFX( 2, 7 );
		FLD_FUNCTION_0089( 10241, 0, 0, 0, 1 );
		FADE( 2, 0 );
		FADE_SYNC();
		CALL_MAP( 5 );
		return;
	}
}

void MallAlley()
{
    // bit id (0) + (257) = 257
    
    if ( ( ( GET_MONTH() == 9 ) && ( GET_DAY_OF_MONTH() == 5 ) ) && ( FUNCTION_0083() == 8 ) )
    {
        OPEN_MSG_WIN();
        MSG( OUT_STOP );
        CLOSE_MSG_WIN();
        FADE( 5, 10 );
        FADE_SYNC();
        FLD_FUNCTION_0138( FUNCTION_0137( 0 ), 13 );
        FUNCTION_000C( 5 );
        FUNCTION_000D( 0 );
        FADE_SYNC();
    }
    else if ( ( ( GET_MONTH() == 4 ) && ( GET_DAY_OF_MONTH() == 21 ) ) && ( BIT_CHK( ( 0 + 257 ) ) == 0 ) )
    {
        OPEN_MSG_WIN();
        MSG( JUNPEI_STOP_ALLEY );
        CLOSE_MSG_WIN();
        FADE( 5, 10 );
        FADE_SYNC();
        FLD_FUNCTION_0138( FUNCTION_0137( 0 ), 13 );
        FLD_FUNCTION_0138( FUNCTION_0137( 1 ), 14 );
        FUNCTION_01E6();
        FUNCTION_000C( 5 );
        FUNCTION_000D( 0 );
        FADE_SYNC();
    }
    else 
    {
        FADE( 2, 0 );
        FADE_SYNC();
        CALL_FIELD( 8, 9, 0, 0 );
        return;
    }

}

void MallMap()
{
    
    if ( ( ( GET_MONTH() == 9 ) && ( GET_DAY_OF_MONTH() == 5 ) ) && ( FUNCTION_0083() == 8 ) )
    {
        OPEN_MSG_WIN();
        MSG( OUT_STOP );
        CLOSE_MSG_WIN();
    }
    else 
    {
        // bit id (((0) + (1024)) + (2048)) + (19) = 3091
		BIT_ON( ( ( ( 0 + 0x0400 ) + 0x0800 ) + 19 ) );
		FADE( 1, 0 );
		FADE_SYNC();
		CALL_MAP( 1 );
    }

}